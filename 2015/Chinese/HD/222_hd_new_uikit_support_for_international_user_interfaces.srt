1
00:00:19,353 --> 00:00:24,224
国际用户界面新UIKit支持


2
00:00:30,197 --> 00:00:31,431
大家
下午好！


3
00:00:31,498 --> 00:00:33,233
欢迎参加


4
00:00:33,300 --> 00:00:35,502
“国际用户界面新UIKit支持”
这个会议 


5
00:00:35,569 --> 00:00:38,539
我叫萨拉·拉迪 我是一名
国际利用软件工程师 


6
00:00:38,605 --> 00:00:41,208
和很多其他人一样 
我也十分想以我的母语


7
00:00:41,275 --> 00:00:43,243
来使用你们开发的
令人惊艳的app 


8
00:00:43,310 --> 00:00:46,980
但是我在App Store中 
就是找不到那些很棒的


9
00:00:47,047 --> 00:00:48,549
app的本地化版本 


10
00:00:49,349 --> 00:00:53,453
我的母语是阿拉伯语 


11
00:00:53,520 --> 00:00:55,355
在我从小长大的国家里 


12
00:00:55,422 --> 00:00:57,157
那里 我们的书写习惯
不是从右到左 


13
00:00:57,891 --> 00:01:01,428
智能手机变得流行之前 
我们并不用考虑


14
00:01:01,495 --> 00:01:03,497
从右往左的布局 


15
00:01:03,931 --> 00:01:07,634
因此 只要对
文本渲染


16
00:01:07,935 --> 00:01:09,369
和字体提供支持就足够了 


17
00:01:10,204 --> 00:01:13,607
但是在今天 
有了这些电子设备 


18
00:01:14,041 --> 00:01:16,009
人们开始使用
越来越多的电子书 


19
00:01:16,376 --> 00:01:19,112
他们和自己的设备
进行了越来越多的交互 


20
00:01:19,847 --> 00:01:23,283
因此在你们的app中仅仅
对文本提供支持已经不够了 


21
00:01:23,450 --> 00:01:26,720
对这些本地化提供支持时 
考虑你的app的布局、流 


22
00:01:27,087 --> 00:01:30,691
就变得
越来越重要了 


23
00:01:31,859 --> 00:01:35,495
就像我一样 
有一百万的用户都想


24
00:01:36,430 --> 00:01:38,832
以他们的母语来使用
自己的app 


25
00:01:39,700 --> 00:01:43,303
这是一个巨大的机遇 
你可以在世界的这些区域


26
00:01:43,370 --> 00:01:44,738
拓展你的市场 


27
00:01:46,607 --> 00:01:49,610
这里有一个实例 
这是Apple在迪拜的一个广告 


28
00:01:49,676 --> 00:01:51,879
位于世界上最大的
建筑物之一 


29
00:01:52,412 --> 00:01:54,081
由此你就可以了解


30
00:01:54,147 --> 00:01:56,250
Apple在中东的
存在 


31
00:01:58,385 --> 00:02:00,587
那么我们今天
要谈些什么呢？


32
00:02:01,054 --> 00:02:03,056
我们主要要谈谈...


33
00:02:04,458 --> 00:02:07,294
不好意思 


34
00:02:07,361 --> 00:02:09,263
我们主要要谈谈


35
00:02:09,329 --> 00:02:11,932
与从右到左用户界面
相关的挑战 


36
00:02:12,933 --> 00:02:15,602
然后我们会介绍下
新UIKit支持 


37
00:02:16,103 --> 00:02:18,172
我们为从右到左的语言
添加了UIKit支持 


38
00:02:18,238 --> 00:02:21,008
这样 我们就可以
让你就可以毫不费力地


39
00:02:21,074 --> 00:02:24,278
支持
从右到左 


40
00:02:24,811 --> 00:02:27,181
然后我们会谈谈
你的定制布局 


41
00:02:27,247 --> 00:02:29,583
谈谈你如何可以通过
自动布局、在你的定制布局中


42
00:02:29,650 --> 00:02:32,819
添加从右到左支持 
之后我们会介绍下我们刚刚


43
00:02:32,886 --> 00:02:37,925
加到iOS 9上的新API 
然后再谈一些


44
00:02:37,991 --> 00:02:40,727
异常情况 
希望会议结束时 


45
00:02:40,794 --> 00:02:44,831
我可以看到更多的app在
App Store中本地化为


46
00:02:44,898 --> 00:02:47,067
阿拉伯语和希伯来语 
不好意思 


47
00:02:49,570 --> 00:02:51,805
让我们开始吧 
先来看一个概述 


48
00:02:52,539 --> 00:02:55,542
当你用从左到右的语言
设计你的app时 


49
00:02:56,043 --> 00:02:59,112
比如说英语 
你总是先把


50
00:02:59.646 --> 00:03:02.783 align:middle
最重要的
元素


51
00:02:59,646 --> 00:03:02,783
最重要的
元素


52
00:03:02,850 --> 00:03:04,351
放到屏幕的左侧 


53
00:03:05,118 --> 00:03:07,054
之后 
如果你还有其他元素 


54
00:03:07,187 --> 00:03:09,189
它们就会自然地
从左边流到右边 


55
00:03:09,489 --> 00:03:10,991
我们这样做的原因 


56
00:03:11,058 --> 00:03:14,194
是因为布局本身开始跟随
脚本的


57
00:03:14,261 --> 00:03:16,163
读写
方向 


58
00:03:16,630 --> 00:03:20,000
因此如果你是从右到左
设计你的app、反转脚本 


59
00:03:20,067 --> 00:03:23,704
这就完全说得通了 
因为脚本的读写顺序


60
00:03:23,770 --> 00:03:25,372
就是从右到左 


61
00:03:27,875 --> 00:03:32,279
此外 UI镜像概念
也不仅仅适用于静态UI 


62
00:03:32,346 --> 00:03:34,515
它同样适用于动态UI 


63
00:03:34,715 --> 00:03:36,083
比如 你在你的app中


64
00:03:36,149 --> 00:03:39,186
手势导航、
导航动画 


65
00:03:39,486 --> 00:03:42,122
比如这里 
后退按钮总是


66
00:03:42,189 --> 00:03:43,724
位于屏幕的左侧 


67
00:03:44,091 --> 00:03:47,828
因此 在从右到左的环境中写作时 
不仅后退按钮应该


68
00:03:47,895 --> 00:03:50,264
位于右侧 
相应的手势和动画


69
00:03:50,330 --> 00:03:52,199
同样也应该
位于右侧 


70
00:03:55,135 --> 00:03:56,937
那么UIKit有什么新特性呢？


71
00:03:57,771 --> 00:04:02,176
在iOS 9
UIKit上 发送方控制器完全支持


72
00:04:02,242 --> 00:04:03,410
用户界面镜像 


73
00:04:03,577 --> 00:04:05,412
这就意味着 
但你的app在从右到左的


74
00:04:05,546 --> 00:04:09,082
环境中运行时 
它们会自动替你翻转过来 


75
00:04:09,316 --> 00:04:13,153
整个系统和我们所有的
原生app都完全支持


76
00:04:13,220 --> 00:04:16,589
从右到左的UI 因此
不用担心你的app会不一致 


77
00:04:18,125 --> 00:04:21,428
我们来看看原生app中的
一些标准控件 


78
00:04:22,162 --> 00:04:24,264
我们就从UI表格视图开始吧 


79
00:04:25,465 --> 00:04:28,268
这个例子取自
“设置”app 


80
00:04:28,335 --> 00:04:31,171
我们使用了一个
库存UI表格视图 


81
00:04:31,371 --> 00:04:34,708
你可以在这里看到 
我们的设备运行语言是英语 


82
00:04:34,775 --> 00:04:37,678
因此图表位于
屏幕的左侧 


83
00:04:37,845 --> 00:04:40,981
标签是左对齐 
表格视图附件位于


84
00:04:41,048 --> 00:04:44,218
右侧 现在 
把我的语言改成希伯来语 


85
00:04:44,284 --> 00:04:48,722
举例来说 它会自动替我
翻转表格视图单元 


86
00:04:49,022 --> 00:04:51,491
所以现在所有的图标
都到了右侧 


87
00:04:51,758 --> 00:04:55,495
文本标签在图标左侧
右对齐了 


88
00:04:55,562 --> 00:04:58,165
表格附件也到了
左侧 


89
00:04:59,666 --> 00:05:01,702ddle
接下来是导航控件 


90
00:04:59,666 --> 00:05:01,702
接下来是导航控件 


91
00:05:02,269 --> 00:05:04,304
这是一个取自
手机app的实例 


92
00:05:04,371 --> 00:05:07,207
你可以看到后退按钮现在
位于屏幕的右侧 


93
00:05:07,274 --> 00:05:09,610
并且 
导航手势和动画


94
00:05:09,676 --> 00:05:12,179
都来自屏幕的
右边 


95
00:05:12,479 --> 00:05:15,249
如果你仔细看 
还有UI表格 


96
00:05:15,315 --> 00:05:18,218
底部的UI表格
也翻转过来了 


97
00:05:18,285 --> 00:05:20,387
所以现在“收藏夹”
到了右侧 


98
00:05:21,788 --> 00:05:25,325
下一个 跟踪手势 
这是另一个取自“时钟”app


99
00:05:25,392 --> 00:05:29,663
的一个UI表格视图的实例 
你可以看到幻灯片 


100
00:05:29,963 --> 00:05:33,500
滑到上方的手势
来自屏幕的左边 


101
00:05:34,434 --> 00:05:37,404
如果你使用库存UI表格视图 
然后启用


102
00:05:37,471 --> 00:05:39,173
滑到上方的手势 
就可以免费实现了 


103
00:05:41,842 --> 00:05:44,578
那么如果在
你的app中允许从右到左支持呢？


104
00:05:44,978 --> 00:05:47,548
如果你已经在你的app
进行了这项本地化 


105
00:05:48,015 --> 00:05:50,651
那么你只需要
链接到iOS 9即可 


106
00:05:50,918 --> 00:05:52,619
然后测试你的app 


107
00:05:52,686 --> 00:05:55,255
确保你的定制布局
按预期运作 


108
00:05:56,957 --> 00:05:59,459
但是如果你是首次添加


109
00:05:59,526 --> 00:06:01,461
这项本地化 
那么我们建议你


110
00:06:01,528 --> 00:06:04,798
把你的storyboards改为
自动布局这一基础步骤 


111
00:06:04,865 --> 00:06:08,202
这样当你添加本地化时 


112
00:06:08,402 --> 00:06:12,472
XCode就会快速为你创建
基础字符串 


113
00:06:12,573 --> 00:06:15,242
你就可以导出它们
然后进行翻译 


114
00:06:15,442 --> 00:06:18,846
翻译完毕后 你就可以
通过XCode再次把它们导入 


115
00:06:19,246 --> 00:06:22,349
这样 当你运行你的app时 
你就会看到 


116
00:06:22,416 --> 00:06:25,752
你的翻译被自动集成了 
并且 


117
00:06:25,819 --> 00:06:27,321
你的布局也翻转过来了 


118
00:06:29,189 --> 00:06:31,058
我们再来谈谈测试 


119
00:06:32,826 --> 00:06:36,663
即使没有这些本地化项目、
对翻译进行集成 


120
00:06:36,730 --> 00:06:40,667
XCode也会大大简化
你对从右到左的布局的测试 


121
00:06:41,068 --> 00:06:42,803
当你来到XCode结构中 


122
00:06:43,070 --> 00:06:46,173
把你的应用程序的语言
从系统语言改为


123
00:06:46,440 --> 00:06:48,108
从右到左的语言时 


124
00:06:48,175 --> 00:06:50,444
它就会为你模拟一个
从右到左的环境 


125
00:06:50,511 --> 00:06:53,480
你就可以看到你的app
是否已经为从右到左


126
00:06:53,580 --> 00:06:55,816
这种环境
做好准备了 


127
00:06:56,450 --> 00:06:58,886
我们想向你展示下
我们刚刚谈到的这些内容 


128
00:06:58,952 --> 00:07:01,655
我会请我的同事
阿尔坦·阿哈默德


129
00:07:01,722 --> 00:07:03,156
上台给你做个演示 


130
00:07:15,502 --> 00:07:17,304
<br/> 
太好了 谢谢 萨拉 


131
00:07:18,438 --> 00:07:23,310
我要向你们展示一个app
来当例子 这是我写的 


132
00:07:23,410 --> 00:07:26,046
这是我写的一个简单的
食谱app 我想为你们添加


133
00:07:26,113 --> 00:07:28,448
一个从右到左的本地化 
让你们看看 


134
00:07:28,515 --> 00:07:30,551
借助我们添加到iOS 9的新东西 


135
00:07:30,918 --> 00:07:34,188
这有多么容易 


136
00:07:34,288 --> 00:07:37,424
这是app 
相当直接 


137
00:07:37,491 --> 00:07:39,993
这里有一个表格视图 
底部有一个标签栏 


138
00:07:40,594 --> 00:07:43,063
如果我们点击其中的
一个单元 


139
00:07:43,130 --> 00:07:44,965
我们就可以看到那个食谱的
详细视图 


140
00:07:45,032 --> 00:07:47,501
我们在这里有一些定制标签
和类似的东西 


141
00:07:47,568 --> 00:07:50,971
是通过自动布局布置的 
还有一个集合视图 


142
00:07:51,038 --> 00:07:54,675
展示了那个食谱的一些照片 
用户就是要照着这个食谱 


143
00:07:54,741 --> 00:07:56,310
来制作美食 


144
00:07:58,512 --> 00:08:03,450
既然我们准备好向我们的
app添加一个从右到左的


145
00:08:03,517 --> 00:08:06,553
本地化 我们就想
先看看它长什么样 


146
00:08:06,620 --> 00:08:09,990
但是在对任何翻译
进行集成之前 


147
00:08:10,057 --> 00:08:11,992
或者在做任何此类事之前 
我们想先看看 


148
00:08:12,059 --> 00:08:14,528
添加了新的变更之后 
我们的app成了什么样子 


149
00:08:15,028 --> 00:08:17,865
要照着萨拉所说的做 
我要到XCode中对屏幕菜单


150
00:08:17,998 --> 00:08:22,736
进行编辑 
从应用程序语言下拉菜单中 


151
00:08:22,803 --> 00:08:25,239
我要选择从右到左的
伪语言 


152
00:08:26,340 --> 00:08:29,443
这样会让那些UI
发生改变 


153
00:08:29,510 --> 00:08:31,211
而不用真正加载
任何翻译 


154
00:08:31,645 --> 00:08:33,780
还有一项额外的优点 


155
00:08:33,847 --> 00:08:36,416
如果我的母语不是
一种从右到左的语言 


156
00:08:36,482 --> 00:08:39,919
我也可以在英语中看到
我的app带有从右到左的UI


157
00:08:39,986 --> 00:08:41,755
是什么样子 这样 
在我进行任何翻译之前 


158
00:08:41,822 --> 00:08:45,492
我就不用学习那些语言 或者
找一个母语人士帮我复审 


159
00:08:46,159 --> 00:08:48,729
我来把它关掉 
并且再次运行app 


160
00:08:51,098 --> 00:08:51,932
搞定了 


161
00:08:51,999 --> 00:08:56,003
一行代码都没写 
我就把所有的这些变更引入了


162
00:08:56,069 --> 00:08:57,504
我的app 
我可以发现 


163
00:08:57,571 --> 00:08:58,872
东西看上去很不错 


164
00:08:59,373 --> 00:09:04,044
我们查看下我们的app 
看看发生了哪些变动 


165
00:09:04,111 --> 00:09:07,014
因为我用的是标准表格视图
单元类型 即第I类 


166
00:09:07,748 --> 00:09:11,118
文本标签位于
右侧 


167
00:09:11,718 --> 00:09:14,521
V形图案位于左侧 
并且指向左侧 


168
00:09:14,955 --> 00:09:16,623
就连底部的标签栏
也翻转过来了 


169
00:09:16,690 --> 00:09:19,860
如同从右到左的用户
预期的那样 


170
00:09:19,993 --> 00:09:21,495
现在第一个标签到了
最右边 


171
00:09:22,196 --> 00:09:25,999
如果你再看看导航栏 
你会发现之前位于右侧的


172
00:09:26,066 --> 00:09:28,068
导航按钮现在
也翻转过来了 


173
00:09:28,135 --> 00:09:29,903
如果我点击其中的一个
单元 


174
00:09:30,270 --> 00:09:32,172
我就会发现 
因为我用的是自动布局 


175
00:09:32,239 --> 00:09:33,674
受前后
约束 


176
00:09:33,974 --> 00:09:37,144
文字对齐和整个UI
都翻转过来了 


177
00:09:37,811 --> 00:09:40,881
这里 有件很酷的事情
要注意 集合视图 


178
00:09:40,948 --> 00:09:42,649
因为我用的是库存集合视图、
默认的


179
00:09:42,716 --> 00:09:46,086
集合视图流布局 
集合视图也翻转过来了 


180
00:09:46,153 --> 00:09:48,622
因此 
现在第一张照片到了右侧 


181
00:09:48,856 --> 00:09:52,693
而后面的项目则
接到了左边 


182
00:09:53,126 --> 00:09:55,796
正如萨拉所指出的那样 
导航也颠倒过来了 


183
00:09:55,863 --> 00:09:59,099
如果我点击这个后退按钮 
你可以看看我到了哪里 


184
00:09:59,399 --> 00:10:01,835dle
导航从右侧出现了 
事实上 


185
00:09:59,399 --> 00:10:01,835
导航从右侧出现了 
事实上 


186
00:10:02,202 --> 00:10:04,771
如果我们尝试滑动 
我们也能看到同样的效果 


187
00:10:06,039 --> 00:10:06,840
太棒了 


188
00:10:06,907 --> 00:10:10,177
我已经在我的app中检查了
这些新的从右到左的变更 


189
00:10:10,244 --> 00:10:11,945
看起来很不错 
我准备好添加


190
00:10:12,012 --> 00:10:13,280
翻译、


191
00:10:13,580 --> 00:10:15,249
看看


192
00:10:15,315 --> 00:10:17,384
过程是什么
样子的 


193
00:10:18,752 --> 00:10:20,254
那么
我要选择我的项目 


194
00:10:20,320 --> 00:10:23,457
在项目导航中 
我要去到编辑器中 


195
00:10:23,524 --> 00:10:26,393
这里 你可以看到一些
与本地化相关的选项 


196
00:10:26,460 --> 00:10:29,162
那么 
我要添加本地化 


197
00:10:29,429 --> 00:10:30,764
我来选择阿拉伯语 


198
00:10:31,598 --> 00:10:36,203
XCode向我显示了一个对话框 
开始工作了 


199
00:10:36,270 --> 00:10:40,073
这样就会创建
我需要翻译的


200
00:10:40,140 --> 00:10:42,643
本地资源文件 


201
00:10:43,911 --> 00:10:47,714
下一步需要从我的项目中
导出


202
00:10:47,781 --> 00:10:50,350
字符串 
那么我们再回到编辑器菜单 


203
00:10:50,417 --> 00:10:51,919
点击本地化导出 


204
00:10:52,352 --> 00:10:54,254
XCode问我
要导出到哪里 


205
00:10:54,721 --> 00:10:57,357
我选择桌面 
然后点击“保存” 


206
00:10:58,192 --> 00:11:01,962
现在XCode从我的项目中
取出了所有的字符串 


207
00:11:02,296 --> 00:11:04,164
并且打包进了一个
XLIFF文档 


208
00:11:04,231 --> 00:11:07,367
这是软件翻译
常见的文件格式 


209
00:11:07,668 --> 00:11:09,036
并且把文件放到了桌面上 


210
00:11:09,670 --> 00:11:14,241
我可以把这个文件发给一位
翻译人员 


211
00:11:14,341 --> 00:11:16,643
翻译人员会替我
正确翻译完毕 


212
00:11:16,710 --> 00:11:18,912
然后返回给我一个
翻译好的XLIFF的文件 


213
00:11:20,380 --> 00:11:24,418
非常棒 翻译人员
搞定了翻译部分 


214
00:11:25,719 --> 00:11:27,187
我准备好
导入本地化了 


215
00:11:27,254 --> 00:11:29,890
我回到编辑器中 
导入本地化 


216
00:11:31,024 --> 00:11:34,228
找到我的翻译好的XLIFF文件夹 
这是我阿拉伯语、


217
00:11:34,294 --> 00:11:37,564
里面有译文的XLIFF文件 
点击“输入”


218
00:11:38,632 --> 00:11:44,137
XCode开始运行 取走全部译文 
并且把它们整合到我的项目中 


219
00:11:45,272 --> 00:11:49,810
现在我们的UI和译文
都准备就绪了 


220
00:11:51,211 --> 00:11:55,182
最后一步 
我要返回编辑结构菜单 


221
00:11:56,016 --> 00:11:56,783
这次我要选择阿拉伯语 


222
00:11:56,850 --> 00:11:59,853
而不是从右到左的伪语言 
因为我写入了本地化 


223
00:12:00,187 --> 00:12:02,122
阿拉伯语
显示了出来 


224
00:12:04,892 --> 00:12:07,494
关闭 再次运行app 


225
00:12:10,864 --> 00:12:11,698
搞定了 


226
00:12:12,232 --> 00:12:13,834
现在 
我有了翻译过的字符串 


227
00:12:13,901 --> 00:12:16,336
我的导航控件标题
翻译过了 


228
00:12:17,437 --> 00:12:20,440
我的标签栏项目也
翻译成了阿拉伯语 


229
00:12:20,507 --> 00:12:23,210
正如用户预期的那样 
我可以给我


230
00:12:23,277 --> 00:12:27,447
说阿拉伯语的客户
提供一个完整的


231
00:12:27,514 --> 00:12:29,183
从右到左的
用户体验 


232
00:12:29,516 --> 00:12:31,251
这里 
还有一个额外的好处 


233
00:12:31,318 --> 00:12:35,122
因为我是用日期组件
格式化程序来


234
00:12:35,656 --> 00:12:38,992
格式化我的准备时间
和烹制时间 


235
00:12:39,159 --> 00:12:42,329
实际上 我也得到了
它们的本地化版本 


236
00:12:42,396 --> 00:12:46,233
使用数字和日期格式化程序
的无缝插件 


237
00:12:47,935 --> 00:12:48,769
可以了 


238
00:12:48,836 --> 00:12:50,637
把你现有的从左到右app
转变成


239
00:12:50,704 --> 00:12:53,740
从右到左的app 
就是


240
00:12:53,807 --> 00:12:55,075
这么简单 


241
00:12:55,409 --> 00:12:56,376
我要请保罗上来 


242
00:12:56,443 --> 00:12:58,946
请他再来讲讲 
你应该如何转变


243
00:12:59,313 --> 00:13:00,547iddle
你的定制UI 


244
00:12:59,313 --> 00:13:00,547
你的定制UI 


245
00:13:11,058 --> 00:13:13,493
就像萨拉
和阿尔坦向你们演示的 


246
00:13:13,560 --> 00:13:17,030
如果你用的是库存UIKit控件 
那么向你的应用程序中添加


247
00:13:17,097 --> 00:13:19,600
一个从右到左的本地化 
就会非常容易 


248
00:13:20,267 --> 00:13:22,536
但是如果你的情况比较复杂 
那该怎么办呢？


249
00:13:23,437 --> 00:13:26,540
首先 在我们开始之前 
我想回顾下我们进行的


250
00:13:26,607 --> 00:13:29,176
一些API变更 这样 
如果你正在定制化UI控件 


251
00:13:29,443 --> 00:13:32,145
你就可以更加容易地
支持从右到左的本地化 


252
00:13:32,746 --> 00:13:36,216
如果你正在用UI文本框 
那么左视图、右视图、


253
00:13:36,316 --> 00:13:38,819
左视图模式、右视图模式
就会自动为你镜像成


254
00:13:38,886 --> 00:13:40,888
从右到左 这样 
你就不需要做其它事情了 


255
00:13:41,321 --> 00:13:43,991
你唯一需要注意的是
矩形边界方法 


256
00:13:44,057 --> 00:13:45,158
它们不会变 


257
00:13:46,727 --> 00:13:49,530
当你在设置separatorIns
ets时 表格视图中 


258
00:13:49,596 --> 00:13:51,598
左右测量会自动
替你翻转过来 


259
00:13:51,665 --> 00:13:53,534
不需要你自己
做任何其它工作 


260
00:13:55,636 --> 00:13:58,105
如果你正在用滑块 
最小、最大值图像


261
00:13:58,172 --> 00:14:00,707e
会自动替你
翻转过来 


262
00:13:58,172 --> 00:14:00,707
会自动替你
翻转过来 


263
00:14:00,774 --> 00:14:03,810
这是因为 在从右到左的语境中 
滑块的最小值位于右侧 


264
00:14:05,312 --> 00:14:07,881
你唯一需要注意的是
矩形边界方法 


265
00:14:07,948 --> 00:14:09,917
当它们
翻转时 


266
00:14:10,017 --> 00:14:13,020
如果你正在X轴上定制
偏移 


267
00:14:13,086 --> 00:14:15,455
如果你在从右到左的
语境中运行 


268
00:14:15,522 --> 00:14:17,925
你就需要确保它们正确
对从右到左做出解释 


269
00:14:18,792 --> 00:14:21,662
最后 对于像你在演示中
看到的导航栏来说 


270
00:14:22,329 --> 00:14:25,799
我们会自动为你翻转左侧栏
按钮项目和右侧栏按钮项目 


271
00:14:25,866 --> 00:14:29,503
但是 
如果你在这些API之外 


272
00:14:29,570 --> 00:14:32,940
添加子视图 
你就需要确保它们摆放正确 


273
00:14:33,006 --> 00:14:35,375
不然 
你就会出现重叠的内容 


274
00:14:36,810 --> 00:14:39,980
我们再来谈谈一些你可能
用在你的应用程序上的


275
00:14:40,047 --> 00:14:42,449
定制UI 
谈谈应该如何正确处理它们 


276
00:14:42,950 --> 00:14:45,219
就像你之前看到的 
标准单元类型会自动


277
00:14:45,285 --> 00:14:47,254
替你翻转 
不需要你做其它工作 


278
00:14:47,855 --> 00:14:49,957
这就意味着 
如果你有定制布局 


279
00:14:50,023 --> 00:14:51,758
你就需要确保
它们也翻转过来了 


280
00:14:52,092 --> 00:14:53,794
以便它们
和OS的其它部分、


281
00:14:54,094 --> 00:14:56,396
和你的应用程序中可能的
其它表格视图单元类型


282
00:14:56,463 --> 00:14:57,497
保持一致 


283
00:14:57,965 --> 00:15:01,335
当然 你可以通过在
你的布局中简单映射帧


284
00:15:01,401 --> 00:15:04,004
来实现这一点 
但是我们建议你


285
00:15:04,071 --> 00:15:05,672
使用前后约束
自动布局


286
00:15:05,739 --> 00:15:08,308
就可以了 
因为这样就不需要你做任何


287
00:15:08,375 --> 00:15:11,011
其它的事情 
无论是从左到右还是


288
00:15:11,078 --> 00:15:14,081
从右到左 你都可以有
一模一样的界面、代码处理 


289
00:15:14,848 --> 00:15:17,050
对于集合视图来说 
情况也很类似 


290
00:15:17,117 --> 00:15:18,552
就像我们在演示中看到的 


291
00:15:18,619 --> 00:15:21,088
集合视图流布局自动支持
从右到左 


292
00:15:21,154 --> 00:15:24,057
只要对项目重排序 
从右流到左即可 


293
00:15:24,791 --> 00:15:28,128
这就意味着 如果你是在做定制
集合视图布局 


294
00:15:28,195 --> 00:15:30,931
你需要确保它在X轴上
也正确翻转了 


295
00:15:31,598 --> 00:15:34,902
一般来说 我们今天推荐你
用子类集合视图流布局 


296
00:15:34,968 --> 00:15:36,036
而不是从头开始


297
00:15:36,103 --> 00:15:38,472
写你自己的
布局代码 


298
00:15:39,273 --> 00:15:41,675
实际上 
明天下午就有个会议 


299
00:15:41,742 --> 00:15:44,311
会讲讲如何很好地
实现这一点 


300
00:15:44,378 --> 00:15:46,847
会议上还会讲讲你可能
想在Cocoa Touch中


301
00:15:46,914 --> 00:15:48,615
进行的其它本地化 


302
00:15:49,149 --> 00:15:51,919
那么 在这次演示中 
我们已经


303
00:15:51,985 --> 00:15:53,921
多次提到了
自动布局 


304
00:15:53,987 --> 00:15:55,822
但是你们可能
不熟悉这项技术 


305
00:15:56,423 --> 00:16:00,127
“自动布局”是一种
通过使用一组约束 


306
00:16:00,360 --> 00:16:02,563
而不是使用帧 向你的UI
放置元素的一种方式 


307
00:16:02,896 --> 00:16:06,900
自从iOS 6之后就可以用来 
让你更方便地支持不同的


308
00:16:06,967 --> 00:16:10,771
iPhone、iPad屏幕尺寸 
支持不同的


309
00:16:10,871 --> 00:16:12,573
尺寸
等级 


310
00:16:13,040 --> 00:16:14,975
新的split-view
多任务处理 


311
00:16:15,242 --> 00:16:18,545
让你的应用程序
更容易


312
00:16:18,612 --> 00:16:20,147
兼容这项新技术 


313
00:16:20,914 --> 00:16:22,883
最后 
即使在从右到左本地化之前 


314
00:16:23,450 --> 00:16:25,152
“自动布局”也能
让你


315
00:16:25,219 --> 00:16:26,954
更容易支持附加的
本地化 


316
00:16:27,321 --> 00:16:29,256
这是因为 
一旦你有了一组很好的约束 


317
00:16:29,590 --> 00:16:31,491
添加一项新的本地化 
就不过是


318
00:16:31,558 --> 00:16:33,427
翻译字符串罢了 
你不需要


319
00:16:33,493 --> 00:16:35,762
写任何特殊代码
来正确配置布局 


320
00:16:35,829 --> 00:16:38,832
如果我在XCode中有什么
约束 


321
00:16:38,899 --> 00:16:41,502
在英语中看起来是
一模一样的 这毫无疑问 


322
00:16:41,568 --> 00:16:44,204
当我在俄语中运行时 
它看起来可能是这样的 


323
00:16:44,671 --> 00:16:46,773
如果我为一种长度是英语的
两倍的语言


324
00:16:46,840 --> 00:16:49,309
添加本地化 
那么 


325
00:16:49,576 --> 00:16:50,777
我并不需要
做其它事情 


326
00:16:50,844 --> 00:16:52,346
因为约束会替我
处理


327
00:16:52,412 --> 00:16:53,881
所有的
UI定位 


328
00:16:54,515 --> 00:16:57,584
现在 从右到左这样做 
还有另外一个原因 


329
00:16:58.619 --> 00:17:03.090 align:middle
你的布局会自动
翻转 


330
00:16:58,619 --> 00:17:03,090
你的布局会自动
翻转 


331
00:17:03,156 --> 00:17:04,691
你不需要
做任何其它事情 


332
00:17:05,259 --> 00:17:07,895
现在 
你可以在storyboards、


333
00:17:08,228 --> 00:17:10,797
代码中使用自动布局 
或者使用两者的组合 


334
00:17:10,964 --> 00:17:13,599
这样 你的约束和storyboar
d就有了一个出口 


335
00:17:13,901 --> 00:17:16,537
当由于某种原因 
你需要改变你的UI时 


336
00:17:16,603 --> 00:17:18,405
你就可以以编程方式
来对它们进行处理 


337
00:17:20,540 --> 00:17:22,709
我们刚才讲了
前后 


338
00:17:22,776 --> 00:17:24,711
同样地 你对它们可能也
不熟悉 


339
00:17:25,412 --> 00:17:27,781
其实就是 当你并排有
两个标签 


340
00:17:28,182 --> 00:17:29,583
并且它们之间有水平
约束时 


341
00:17:29,650 --> 00:17:32,419
你就可以把它们指定为
从左到右 


342
00:17:32,486 --> 00:17:33,854
或者指定为从前往后 


343
00:17:33,921 --> 00:17:36,957
不同之处在于 
从左到右是不会变的 


344
00:17:37,591 --> 00:17:40,394
另一方面 从前往后
在从左到右的本地化中


345
00:17:40,460 --> 00:17:41,762
看起来像是从左到右 


346
00:17:41,995 --> 00:17:44,298
但是实际上 
在从右到左的本地化中 


347
00:17:44,364 --> 00:17:46,133
它是映射了你的UI和布局 


348
00:17:46,700 --> 00:17:49,069
当你在storyboards中
创建约束时 


349
00:17:49,336 --> 00:17:51,672
如果你创建的是默认的
水平约束 


350
00:17:52,105 --> 00:17:54,074
那么它们就已经是
从前往后了 


351
00:17:54,141 --> 00:17:55,442
你并不需要
做任何其它事 


352
00:17:56,844 --> 00:17:59,012
类似地 
如果你在代码中创建约束 


353
00:17:59,079 --> 00:18:00,781le
并且你用的是
可视化格式语言 


354
00:17:59,079 --> 00:18:00,781
并且你用的是
可视化格式语言 


355
00:18:01,181 --> 00:18:04,585
那么同样地 
水平约束也会默认为从前往后 


356
00:18:05,052 --> 00:18:07,721
但是 如果你明确地
创建约束 


357
00:18:08,121 --> 00:18:10,824
或者你是在iOS 9上使用新的
布局定位器API 


358
00:18:11,391 --> 00:18:14,261
那么当你创建约束时 
你就需要确保


359
00:18:14,328 --> 00:18:15,796
你选择了
正确的属性 


360
00:18:18,198 --> 00:18:22,603
你在这个演示中看到的动画 
都会为全部库存控件翻转过来 


361
00:18:22,970 --> 00:18:26,540
这就意味着 
如果你在你的UI中有定制动画 


362
00:18:26,607 --> 00:18:28,775
那么你就需要确保
它们也正确翻转过来了 


363
00:18:28,842 --> 00:18:30,978
当然了 如果你愿意的话 
你可以使用帧 


364
00:18:31,478 --> 00:18:35,616
但是我们建议你使用
带有从前往后的约束的


365
00:18:35,682 --> 00:18:37,217
自动布局
来代替帧 


366
00:18:37,284 --> 00:18:40,521
然后改变那些约束的
定值即可 


367
00:18:40,721 --> 00:18:43,423
这样就可以自动完成
从左到右以及从右到左 


368
00:18:43,490 --> 00:18:45,726
而不需要任何
附加的代码 


369
00:18:45,792 --> 00:18:47,928
这里有一个实例 
你可以看看是怎样实现的 


370
00:18:48,462 --> 00:18:52,299
假如说 
我想改变某个约束的定值 


371
00:18:52,366 --> 00:18:54,568
在这里 我有一个持续时间 


372
00:18:54,635 --> 00:18:56,870
我要把偏移量改成一个
不同的值 


373
00:18:56,937 --> 00:19:00,040
开始动画之前 我要调用layout
IfNeeded 


374
00:19:00,107 --> 00:19:02,543
确保帧的起始位置
是正确的 


375
00:19:03,410 --> 00:19:05,412
然后我会调用一个隐式
动画块 


376
00:19:05,479 --> 00:19:08,115
在动画块里面我可以改变
约束的实际常数 


377
00:19:08,182 --> 00:19:10,817
然后再次调用
layoutIfNeeded 


378
00:19:10,884 --> 00:19:12,085
这样就更新了帧 


379
00:19:12,386 --> 00:19:14,555
因为它位于隐式
动画块里面 


380
00:19:14,621 --> 00:19:16,023
变更也就会被
制成动画 


381
00:19:16,423 --> 00:19:19,226
你可以在这里看到 
这里并没有为从右到左


382
00:19:19,293 --> 00:19:22,429
或者从左到右写特例 
只有一组单一的代码 


383
00:19:22,496 --> 00:19:24,331
代码在两种语境下
都运行的十分完美 


384
00:19:25,966 --> 00:19:27,501
现在 我们再来谈谈手势 


385
00:19:27,568 --> 00:19:30,537
就像你已经看过的
表格视图和导航 


386
00:19:30,604 --> 00:19:31,972
我们把标准手势翻转过来了 


387
00:19:32,406 --> 00:19:36,176
但是 手势识别器API自身
却不会变 


388
00:19:36,410 --> 00:19:38,579
原因在于 
手势识别器


389
00:19:38,645 --> 00:19:40,414
本身是
很抽象的 


390
00:19:40,480 --> 00:19:42,516
我们在框架层次是不可能
知道你使用


391
00:19:42,583 --> 00:19:45,085
手势识别器的
目的 


392
00:19:46,019 --> 00:19:49,823
作为一名开发者 
这对你们意味着当你们使用


393
00:19:49,890 --> 00:19:52,025
手势识别器时、当你们对
手势事件做出响应时 


394
00:19:52,092 --> 00:19:54,061
你们只需要注意
使用手势识别器的


395
00:19:54,795 --> 00:19:56,330
实际用途
即可 


396
00:19:57,331 --> 00:19:59,499
举例来说 
如果你使用你的手势识别器


397
00:19:59,766 --> 00:20:02,769e
在屏幕上绘图 
你就需要保留原样 


398
00:19:59,766 --> 00:20:02,769
在屏幕上绘图 
你就需要保留原样 


399
00:20:02,870 --> 00:20:05,405
这是因为母语为从右到左的用户
不会倒着画 


400
00:20:06,273 --> 00:20:08,909
但是 还是举例来说 
如果你的表格视图单元


401
00:20:08,976 --> 00:20:10,544
有定制手势识别器 
你就需要确保


402
00:20:10,611 --> 00:20:12,813
你把它翻转过来 
因为表格视图样式的


403
00:20:12,880 --> 00:20:14,715
布局
已经翻转过来了 


404
00:20:16,617 --> 00:20:20,754
类似地 
如果你用的是导航手势 


405
00:20:20,821 --> 00:20:23,257
你也需要把它们翻转过来 
就像我们之前看到的 


406
00:20:23,323 --> 00:20:24,925
前后
实际上颠倒了 


407
00:20:24,992 --> 00:20:26,927
这里 要记住的
最重要的事情是 


408
00:20:26,994 --> 00:20:29,730
不论你在做什么 
你都需要确保手势


409
00:20:29,796 --> 00:20:32,933
能够正确追踪手势下方的
UI 


410
00:20:33,200 --> 00:20:35,869
当你从左划到右 
但是UI却从右移到了左 


411
00:20:35,936 --> 00:20:37,804
你肯定不希望
出现这种情况 


412
00:20:37,871 --> 00:20:39,072
因为这会让人
晕头转向 


413
00:20:39,740 --> 00:20:42,743
而如果你用“自动布局” 
你的工作就可以大大简化 


414
00:20:42,809 --> 00:20:45,546
我想把阿尔坦再请回来 
请她对我们刚刚


415
00:20:45,612 --> 00:20:47,581
谈到的事情 
做一个演示 


416
00:20:54,154 --> 00:20:56,156 line:-3
<br/> 
谢谢 保罗 


417
00:20:56,223 --> 00:20:58,392
当保罗做演讲时 
我又考虑了下我的app 


418
00:21:02,196 --> 00:21:05,599
我决定


419
00:21:05,666 --> 00:21:08,669
增加一些定制UI 


420
00:21:09,269 --> 00:21:14,141
因此我就创建了一个很酷的
定制表格视图单元子类 


421
00:21:14,208 --> 00:21:16,243
是通过“自动布局”
布置的 


422
00:21:16,577 --> 00:21:17,477
相当直接 


423
00:21:17,544 --> 00:21:20,414
这一行中有一些
更多信息文本标签 


424
00:21:20,714 --> 00:21:23,016
这里有一张漂亮的图片 
这样用户就可以看到他们


425
00:21:23,083 --> 00:21:25,252
将要烹饪的美食的图片 


426
00:21:25,319 --> 00:21:29,256
左侧还有一个很酷的小
收藏夹视图 


427
00:21:29,323 --> 00:21:31,992
这样用户就可以通过划动
单元 把它拖出来 


428
00:21:32,326 --> 00:21:34,962
和我们现在在表格视图单元
上有的


429
00:21:35,028 --> 00:21:37,564
库存swipeToDelete手势
很类似 


430
00:21:38,098 --> 00:21:41,602
如果他们拖的足够远 
那么图片顶部会出现一颗


431
00:21:41,668 --> 00:21:43,670
小星星 
告诉他们这张食谱


432
00:21:43,737 --> 00:21:45,906
已经添加到了收藏夹了 


433
00:21:46,807 --> 00:21:49,343
我们来看看在从左到右的


434
00:21:49,409 --> 00:21:52,579
语境中、在英语中 
它是什么样子的 


435
00:21:53,113 --> 00:21:58,552
太好了 我的app现在看起来
更有生机、


436
00:21:58,619 --> 00:22:01,755
更有魅力了 
这是一张照片 


437
00:22:02,122 --> 00:22:07,361
这里有一些文本标签 
实际上 如果我把单元


438
00:22:07,427 --> 00:22:10,264
拖动的足够远 
收藏夹视图就显示出来了 


439
00:22:10,330 --> 00:22:14,134
如果我完成这个手势 
小星星就显示出来了 


440
00:22:14,368 --> 00:22:18,605
太好了 刚才保罗演讲时 
我趁机


441
00:22:18,672 --> 00:22:21,542
学习了
阿拉伯语 


442
00:22:21,875 --> 00:22:24,511
并且向我的app添加了
阿拉伯语本地化 


443
00:22:24,945 --> 00:22:27,614
那么在这个演示中 我们就要
在阿拉伯语中运行app 


444
00:22:27,881 --> 00:22:29,550
这就是我们的从右到左语言 


445
00:22:29,917 --> 00:22:32,286
我要返回
编辑结构菜单 


446
00:22:32,653 --> 00:22:36,890
这次选择“阿拉伯语” 
点击“回车” 运行app 


447
00:22:39,793 --> 00:22:42,296
哇！这是因为我用了带前后约束的
自动布局 


448
00:22:42,362 --> 00:22:44,698
所有的事情
都翻转过来了 


449
00:22:44,765 --> 00:22:47,100
现在图片
到了右侧 


450
00:22:47,301 --> 00:22:48,735
文本标签都成了
右对齐 


451
00:22:48,802 --> 00:22:49,903
位置也都正确 


452
00:22:50,237 --> 00:22:53,674
当然了 V形图案属于库存 
它的位置没变 


453
00:22:54,041 --> 00:22:57,711
格式化程序插件、
持续时间和数字 


454
00:22:57,778 --> 00:23:00,848
都为阿拉伯语正确进行了
本地化 


455
00:23:01,615 --> 00:23:03,317
不过我们还没有看
定制手势 


456
00:23:03,383 --> 00:23:05,452
我们来看看 


457
00:23:05,719 --> 00:23:08,488
因为整个单元都是
从右到左布置 


458
00:23:08,822 --> 00:23:12,659
用户期望滑动收藏夹的
方向也是


459
00:23:12,726 --> 00:23:16,763
如此 
当然更是因为整个系统的


460
00:23:16,830 --> 00:23:18,832
划动删除手势
也翻转过来了 


461
00:23:19,233 --> 00:23:20,868
这样他们就知道 
它是来自左侧 


462
00:23:20,934 --> 00:23:23,504
不论你的定制手势是什么 
用户都会期待


463
00:23:23,570 --> 00:23:24,738
手势
从右开始 


464
00:23:25,439 --> 00:23:27,941
我们来朝着这个方向滑动下 
看看对于这个例子中的


465
00:23:28,008 --> 00:23:31,178
一个从右到左用户来说 
会发生什么 


466
00:23:31,845 --> 00:23:34,414
你可以看到 
事情并未像预期的那样运行 


467
00:23:34,648 --> 00:23:37,951
我划动了 
但是视图没有显示 


468
00:23:38,018 --> 00:23:39,920
表格单元视图以为我
点的是它 


469
00:23:40,320 --> 00:23:41,989
因此给我展示了
详细视图 


470
00:23:42,055 --> 00:23:43,423
这可不太说得通 


471
00:23:44,391 --> 00:23:46,293
发生这种事情的
原因是 


472
00:23:46,360 --> 00:23:49,863
我的代码中有一个
隐含假定 


473
00:23:50,230 --> 00:23:52,232
超出了那个划动的
定向性 


474
00:23:52,833 --> 00:23:55,702
我期望划动是
从左到右 


475
00:23:56,136 --> 00:23:58,305
或者换句话说 
是沿着正的X方向 


476
00:23:59,239 --> 00:24:02,242
事实上 
如果我朝着那个方向划动 


477
00:24:02,309 --> 00:24:04,311
那个视图确实可以
显示出来 


478
00:24:04,578 --> 00:24:07,481
但是 它显示的方向
和我手指拖动的方向


479
00:24:07,548 --> 00:24:09,683
是
相反的 


480
00:24:10,050 --> 00:24:12,586
这对用户来说 
可不太说得通 


481
00:24:12,986 --> 00:24:16,089
你肯定想避免出现
此类情况 


482
00:24:16,857 --> 00:24:20,060
那就让我们回到
表格视图单元子类 


483
00:24:20,127 --> 00:24:23,497
看看我们能不能找到
问题所在 


484
00:24:24,364 --> 00:24:26,733
这里你可以看到 
我有两项手势识别器


485
00:24:26,800 --> 00:24:28,168
相关的方法 


486
00:24:28,235 --> 00:24:30,771
第一个是手势识别器
应该开始的方法 


487
00:24:31,405 --> 00:24:33,373
我采用这种方法的
原因是 


488
00:24:33,440 --> 00:24:36,076
就像我之前说过的那样 
我想要对定制手势以及


489
00:24:36,143 --> 00:24:38,111
库存表格视图手势
都提供支持 


490
00:24:38,645 --> 00:24:41,448
那么在这里 
如果用户滑动的方向


491
00:24:41,515 --> 00:24:44,818
和我的手势方向一致 
我就让我的手势识别器启动 


492
00:24:45,152 --> 00:24:47,654
如果用户朝着swipeToDele
te的方向滑动 


493
00:24:47,721 --> 00:24:50,057
那么我就什么也不做 
让表格视图自行处理 


494
00:24:50,924 --> 00:24:53,660
那么在这里你可以看到 
我有手势识别器的X翻译 


495
00:24:53,961 --> 00:24:56,597
如果翻译大于零值 
或者大于从左到右 


496
00:24:56,663 --> 00:25:01,001
那么我就会
启动我的手势识别器 


497
00:25:01,301 --> 00:25:03,637
那么我们在这里需要做的 
就是校验我们是否运行在


498
00:25:03,704 --> 00:25:06,974
从右到左的语境中 
如果是的话 


499
00:25:07,040 --> 00:25:10,110
我们就需要查找相反方向的
翻译 


500
00:25:10,377 --> 00:25:13,413
要知道我是否允许在
从右到左的


501
00:25:13,480 --> 00:25:16,450
本地化中 
我要使用我们加到iOS上


502
00:25:16,583 --> 00:25:19,019
的新API 
保罗很快会讲到这一点 


503
00:25:19,086 --> 00:25:22,990
不过因为
我们现在正好需要 那我就先用了 


504
00:25:23,056 --> 00:25:25,792
我先声明一个叫做


505
00:25:25,859 --> 00:25:28,795
isLeftToRightLayo
ut的新常数 


506
00:25:30,330 --> 00:25:33,901
我要为语义内容属性
使用一个新的


507
00:25:33,967 --> 00:25:38,038
用户界面布局方向 
我要在我的


508
00:25:38,305 --> 00:25:41,875
视图语义内容属性中
解析我们加到 iOS 9的API 


509
00:25:42,142 --> 00:25:45,212
这会返回一个解算过的
布局方向 对这个视图来说


510
00:25:45,279 --> 00:25:50,017
是从左到右还是从右到左 
如果返回的方向是


511
00:25:50,083 --> 00:25:51,852
从左到右 
那么我就知道 我是在


512
00:25:51,919 --> 00:25:53,187
从左到右的本地化中运行 


513
00:25:54,421 --> 00:25:57,858
校验翻译之前 
下一步要做的是 


514
00:25:57,925 --> 00:26:00,460
我要查看下我的
isLeftToRight变量 


515
00:26:00,794 --> 00:26:03,330
如果是从左到右 那么
我们像往常一样继续即可 


516
00:26:04,264 --> 00:26:07,334
如果是从右到左 那么我们
就要寻找小于零或者位于


517
00:26:07,401 --> 00:26:09,069
导航X中的翻译 


518
00:26:09,570 --> 00:26:12,172
这里的第二个方法 


519
00:26:12,239 --> 00:26:15,943
是这个updateFavorite
ButtonPosition方法 


520
00:26:16,009 --> 00:26:19,246
那么在这里 
我们实际上就对约束的常数


521
00:26:19,313 --> 00:26:22,216
进行了处理 
并且在屏幕上显示了那个视图 


522
00:26:22,282 --> 00:26:25,185
在这里你还可以看到 
我应该允许拖动


523
00:26:25,252 --> 00:26:28,288
收藏夹按钮常数 


524
00:26:28,355 --> 00:26:30,724
这样就可以告诉下面的代码 
是否应该开始显示


525
00:26:30,791 --> 00:26:35,262
那个视图了 
同样地 我们会校正的X翻译 


526
00:26:35,629 --> 00:26:38,198
解决方法也很类似 
我们把这个校验拿过来 


527
00:26:39,533 --> 00:26:42,369
放到这里 


528
00:26:42,436 --> 00:26:45,572
然后校验从左到右布局 


529
00:26:45,639 --> 00:26:47,808
校验相反方向的翻译 


530
00:26:47,875 --> 00:26:49,743
并且校验
从右到左 


531
00:26:50,844 --> 00:26:53,914
这里的最后一位是这个distanc
ePulled变量 


532
00:26:53,981 --> 00:26:58,418
因此 distancePulled
变量 或者常量 


533
00:26:58,485 --> 00:27:03,690
会告诉下面的代码 
用户在单元上指头拖动了多远 


534
00:27:04,358 --> 00:27:06,927
现在我们就可以接受一个
负的翻译了 


535
00:27:06,994 --> 00:27:09,997
distancePulled变量也
成为负的 这样


536
00:27:10,063 --> 00:27:12,399
没有什么意义 
因为它表达了一个绝对值的


537
00:27:12,466 --> 00:27:15,669
分类 
要纠正这一点 


538
00:27:15,736 --> 00:27:19,506
我们就也要获取翻译的
绝对值 


539
00:27:19,873 --> 00:27:21,408
这样就可以替我们解决问题 


540
00:27:22,176 --> 00:27:25,078
做了这些变更后 
我们再来运行下app 


541
00:27:25,579 --> 00:27:28,015
看看情况怎样 


542
00:27:29,716 --> 00:27:31,952
好了 这里的一切
看起来都不错 


543
00:27:32,252 --> 00:27:34,788
现在如果我把我的手指


544
00:27:34,855 --> 00:27:38,692
拖过去 那么事情就会像
从右到左的用户期望的那样了 


545
00:27:38,892 --> 00:27:40,327
就是这样 
你就是只需要确保


546
00:27:40,394 --> 00:27:42,663
留意你的代码中的
此类


547
00:27:42,729 --> 00:27:45,399
假设 
这就是从右到左的关键所在 


548
00:27:45,465 --> 00:27:47,701
有时候 
事情


549
00:27:47,768 --> 00:27:50,103
就是
这么简单 


550
00:27:50,571 --> 00:27:53,273
把你的定制手势和UI


551
00:27:53,340 --> 00:27:56,443
转变为从右到左 就只需要做这些 


552
00:27:56,510 --> 00:27:59,146
我们请回保罗 
请他再讲一些异常


553
00:27:59,213 --> 00:28:01,415ddle
以及
最佳做法 


554
00:27:59,213 --> 00:28:01,415
以及
最佳做法 


555
00:28:08,188 --> 00:28:11,358
<br/> 
好的 谢谢 阿尔坦 


556
00:28:11,425 --> 00:28:14,194
我们来讲一些异常 
讲讲我们引入iOS 9的


557
00:28:14,261 --> 00:28:16,430
一些
新API 


558
00:28:17,531 --> 00:28:18,799
其中一个就是我们在


559
00:28:18,866 --> 00:28:21,935
阿尔坦的演示中看到的
语义内容属性API 


560
00:28:22,069 --> 00:28:23,770
那么在我们开始之前 
我们先来谈谈


561
00:28:23,837 --> 00:28:25,572
什么是
语义内容属性 


562
00:28:26,540 --> 00:28:29,576
语义内容属性是
UI视图的一项新属性 


563
00:28:30,310 --> 00:28:34,181
用途是确保所有的UI在
从右到左和从左到右的


564
00:28:34,248 --> 00:28:37,918
语境中都能正确显示 
因为有时候并不是所有的


565
00:28:37,985 --> 00:28:40,053
UI都会翻转 
我们就需要确保我们


566
00:28:40,120 --> 00:28:42,356
可以对此
进行指定 


567
00:28:42,789 --> 00:28:45,492
那么 
默认语义内容属性是未指明的 


568
00:28:46,727 --> 00:28:49,263
在从右到左本地化中会
翻转 


569
00:28:49,329 --> 00:28:51,832
而在从左到右的本地化中则
保持不变 


570
00:28:52,766 --> 00:28:55,335
但是我们还有一些你可以
设置的附加属性类型 


571
00:28:55,402 --> 00:28:57,571
可以阻止翻转发生 
不管是出于历史原因还是


572
00:28:57.638 --> 00:29:01.041 align:middle
出于
其它原因 


573
00:28:57,638 --> 00:29:01,041
出于
其它原因 


574
00:29:01,341 --> 00:29:03,544
可以管理从右到左的用户的
异常 


575
00:29:04,411 --> 00:29:06,680
最后一点 
前后约束的


576
00:29:06,747 --> 00:29:08,515
分辨率 实际上是
基于


577
00:29:08,582 --> 00:29:10,050
语义内容
属性的 


578
00:29:10,617 --> 00:29:12,486
要记住
这一点 


579
00:29:13,187 --> 00:29:15,055
首先是回放 


580
00:29:15,622 --> 00:29:19,526
这里的想法是 
如果你有某种回放控件 


581
00:29:19,793 --> 00:29:21,995
你就用它来取代那个控件的
语义内容属性 


582
00:29:22,062 --> 00:29:23,997
或者取代那一组控件 
来进行回放 


583
00:29:24,064 --> 00:29:25,599
然它们保持
从左到右 


584
00:29:25,666 --> 00:29:28,735
就像你在这个新的 
音乐app中看到的一样 


585
00:29:28,802 --> 00:29:32,439
我们的进度条
以及回放控件 


586
00:29:32,506 --> 00:29:34,808
它们都保持了从左到右 
并不会翻转 


587
00:29:35,876 --> 00:29:37,477
下一个是空间 


588
00:29:37,945 --> 00:29:41,281
是为了注释控制 
对应某种直接UI操纵的


589
00:29:41,348 --> 00:29:44,818
注释控制 
你的游戏中可能有一个


590
00:29:44,885 --> 00:29:47,554
游戏手柄 
按上方向键就向上移动 


591
00:29:47,621 --> 00:29:51,058
按左方向键就往左移动 
或者是文本对齐的类似操作 


592
00:29:51,391 --> 00:29:54,828
因此我们在页面app这里 
有一个分段控件 


593
00:29:54,895 --> 00:29:56,463
你就可以设置文本上的
对齐方式 


594
00:29:56,897 --> 00:29:59,266
即使运行在从右到左的
本地化中 左对齐文本


595
00:29:59.333 --> 00:30:01.301 align:middle
也会停留在
左侧 


596
00:29:59,333 --> 00:30:01,301
也会停留在
左侧 


597
00:30:01,635 --> 00:30:04,271
我们不要动它了 


598
00:30:04,671 --> 00:30:07,140
最后 
对于你们那些想更明确的人 


599
00:30:07,207 --> 00:30:09,443
我们还有这些
forceLeftToRight


600
00:30:09,510 --> 00:30:12,112
和RightToLeftand
从右到左属性类型 


601
00:30:12,179 --> 00:30:14,114
你从它们的名字就可以
知道它们的功能 


602
00:30:14,181 --> 00:30:17,851
forceRighToLeft会对
从左到右的本地化中的布局产生影响 


603
00:30:17,918 --> 00:30:21,221
其它则只有当你在从右到左的语境中运
行app时才会产生影响 


604
00:30:21,288 --> 00:30:23,590
对于这些我最后要说的是 
如果你想用它们 


605
00:30:23,657 --> 00:30:25,325
请到实验室
和我们谈谈 


606
00:30:25,392 --> 00:30:26,960
或者在
开发者论坛发帖 


607
00:30:27,027 --> 00:30:29,863
以便我们确认你没有
做错什么事情、


608
00:30:29,930 --> 00:30:32,900
确认现有的API
不能很好地满足你的需求 


609
00:30:32,966 --> 00:30:35,102
也许我们漏了添加一种
API 


610
00:30:35,169 --> 00:30:37,771
你就可以
告诉我们 


611
00:30:39,173 --> 00:30:43,243
我想再谈谈
当你支持从右到左时的


612
00:30:43,310 --> 00:30:45,445
UI和文本的
最佳做法 


613
00:30:46,013 --> 00:30:48,515
你要确保自己时刻在做的
一件事是 


614
00:30:48,582 --> 00:30:51,451
就像我们在演示中看到的
那样 使用格式化程序 


615
00:30:51,752 --> 00:30:53,587
对于阿拉伯语来说 
这尤其重要 


616
00:30:53,654 --> 00:30:55,956
因为不同的说阿拉伯语的
国家 对于一年中的


617
00:30:56,023 --> 00:30:59,259
月份 
使用的是不同的单词 


618
00:30:59,493 --> 00:31:01,628dle
你需要确保正确
向你的全部用户


619
00:30:59,493 --> 00:31:01,628
你需要确保正确
向你的全部用户


620
00:31:01,695 --> 00:31:03,463
显示这些 
不论他们是在哪个地区、


621
00:31:03,530 --> 00:31:05,432
哪个国家用 


622
00:31:05,499 --> 00:31:06,800
事实上 明天有场


623
00:31:06,867 --> 00:31:09,102
“国际化中有什么新料”
演讲 


624
00:31:09,169 --> 00:31:11,939
就在一大早、上午九点 
他们会讲一下所有现有的


625
00:31:12,005 --> 00:31:14,775
格式化程序 
以及iOS 9上可用的一些


626
00:31:14,842 --> 00:31:17,211
新
格式化程序API 


627
00:31:18,679 --> 00:31:21,114
但是 你还是需要确保 
如果对于手势识别器 


628
00:31:21,348 --> 00:31:24,451
你有某种布局或者逻辑分支 
就像我们看到的


629
00:31:24,518 --> 00:31:27,588
那样 
那么你绝不应该用NSLocale、


630
00:31:27,654 --> 00:31:30,657
NSbundle或者NSForma
tter来进行确认 


631
00:31:31,792 --> 00:31:33,594
你可能看到过
这样的代码 


632
00:31:33,660 --> 00:31:36,496
你想要知道自己是否运行在从右到左的
本地化中 


633
00:31:36,563 --> 00:31:38,999
你查找下首选语言 
选择最上面的那种语言 


634
00:31:39,066 --> 00:31:41,635
看看它的书写方向是不是
从右到左 然后就搞定了！


635
00:31:42,736 --> 00:31:44,571
你绝对不应该
这样做 


636
00:31:45,138 --> 00:31:47,374
这样很容易
搞砸 


637
00:31:48,141 --> 00:31:50,244
你不会想
这样做的 


638
00:31:50,310 --> 00:31:52,913
如果你想知道自己的app是否运行在
从右到左的语境中 


639
00:31:53,580 --> 00:31:56,316
你应该使用我们在这个
演示中看到的这个新API 


640
00:31:56,717 --> 00:31:59,253
语义内容属性
用户界面布局方向 


641
00:31:59,820 --> 00:32:02,456
进入你感兴趣的
视图的语义内容属性 


642
00:32:02,523 --> 00:32:05,826
看看
它是怎样布局的 


643
00:32:05,893 --> 00:32:09,563
这样你就知道了UI布局的方向
是从左到右 


644
00:32:09,630 --> 00:32:10,564
还是从右到左 


645
00:32:11,131 --> 00:32:14,067
当然了 与此相反的是 
你不能把它用于


646
00:32:14,134 --> 00:32:15,936
区域设置、格式设置 


647
00:32:16,870 --> 00:32:20,274
这里有一个实例 
在某种程度上和上一个


648
00:32:20,340 --> 00:32:22,476
幻灯片的意图一样 
不过这个实例是正确的 


649
00:32:22,543 --> 00:32:24,611
我们得到了
视图的语义属性 


650
00:32:25,179 --> 00:32:27,814
我们请求布局方向 
如果正好是从右到左 


651
00:32:27,881 --> 00:32:30,517
也许 
我们就可以采用定制逻辑 


652
00:32:31,919 --> 00:32:34,121
处理文本时 
大多数情况下 


653
00:32:34,188 --> 00:32:36,657
你需要让对齐和定向性
保持


654
00:32:36,723 --> 00:32:38,559
它们的
默认值 


655
00:32:39,059 --> 00:32:42,496
这是iOS 9上的新变动 
现在默认就是自然对齐 


656
00:32:42,563 --> 00:32:44,831
因此你不需要动
从左到右的语言中的


657
00:32:44,898 --> 00:32:47,334
左对齐文本 
不需要动从右到左的语言中的


658
00:32:47,401 --> 00:32:49,036
右对齐
文本 


659
00:32:50,103 --> 00:32:52,573
类似地 
你绝不应该去动基本


660
00:32:52,639 --> 00:32:55,642
书写方向 除非你是在文本编辑器中
进行书写 


661
00:32:56,009 --> 00:32:57,678
自从iOS 7后 
默认就是这样了 


662
00:32:57,978 --> 00:33:01,248
可能对99%的应用程序来说 
你都绝不应该


663
00:33:01,315 --> 00:33:03,584
去碰这个值、
改变默认值 


664
00:33:04,518 --> 00:33:09,056
此外 你也不应该把这些
用于布局代码分支 


665
00:33:09,122 --> 00:33:11,758
而应该用我们在上一个
幻灯片中看到的API 


666
00:33:13,627 --> 00:33:17,130
最后 我要谈谈图像 
对于从右到左的布局方向


667
00:33:17,197 --> 00:33:20,501
来说 我们有了新API和UI图像 
叫做imageflipped 


668
00:33:21,134 --> 00:33:23,670
它的功能是：
当你处于从右到左的语境时 


669
00:33:23,737 --> 00:33:27,007
它会自动为你
水平翻转图片 因此图片在


670
00:33:27,074 --> 00:33:30,010
从右到左布局方向中会翻转 
在从左到右的布局中则不变 


671
00:33:30,077 --> 00:33:32,079
然后在从右到左布局方向中
翻转过来 


672
00:33:32,613 --> 00:33:34,548
这是基于包含图片的
图片视图的


673
00:33:34,615 --> 00:33:36,617
语义
内容属性 


674
00:33:37,050 --> 00:33:40,120
一般来说 
你只有在定向图片或者


675
00:33:40,187 --> 00:33:43,891
表达某种UI上
才会用它 


676
00:33:44,091 --> 00:33:46,493
这样说从右到左的语言的
用户 


677
00:33:46,560 --> 00:33:48,662
才不会看到自己的照片
成了镜中的照片 


678
00:33:48,762 --> 00:33:52,399
如果你在自己的应用程序中
看到错误或者V形图案 


679
00:33:52,466 --> 00:33:55,135
举例来说 就像我们在
Safari工具栏看到的


680
00:33:55,202 --> 00:33:57,571
后退按钮、前进按钮 
你需要确保它们会翻转过来 


681
00:33:57,838 --> 00:33:58,972
因为所有的


682
00:33:59,039 --> 00:34:02,809
定向性概念都已经
从右翻转到了左 


683
00:34:02,976 --> 00:34:05,812
类似地 如果你有某种代表
UI的图标 


684
00:34:07,014 --> 00:34:10,083
举例来说 一个列表 
在新的地图app的


685
00:34:10,150 --> 00:34:13,219
通行功能中 
我们有这个图标 


686
00:34:13,286 --> 00:34:16,123
让你可以看到操作步骤 
因为它在某种程度上


687
00:34:16,190 --> 00:34:18,625
代表了表格视图 
在表格视图中 


688
00:34:18,692 --> 00:34:19,893
图标位于右侧 


689
00:34:19,960 --> 00:34:21,562
你可以看到 
图标已经翻转过来了 


690
00:34:22,196 --> 00:34:24,398
更微妙的是 
我们也把方向指南中的


691
00:34:24,598 --> 00:34:26,867
人物翻转过来了 
因为如果我们不这么做 


692
00:34:26,934 --> 00:34:29,036
那么人物看起来就像是在
脱离屏幕边缘 


693
00:34:29,101 --> 00:34:31,572
那么就和其它的布局
不怎么相符了 


694
00:34:32,206 --> 00:34:35,842
我想再把阿尔坦请回来 
请她给你们


695
00:34:35,909 --> 00:34:37,210
快速
做个演示 


696
00:34:44,051 --> 00:34:46,719
<br/> 
最后一个演示了 我保证 


697
00:34:55,495 --> 00:34:56,929
好的 


698
00:34:57,231 --> 00:34:58,699
很棒 


699
00:34:58,799 --> 00:35:02,336
我刚刚学到了很多
关于我们添加的这个新的、


700
00:35:02,402 --> 00:35:05,005
很酷的新API的知识 
我决定把我的定制表格视图


701
00:35:05,072 --> 00:35:08,008
单元中的定制推向
新高度 


702
00:35:08,375 --> 00:35:12,779
添加一个定制V形图案 
实际上 它是一个披萨片 


703
00:35:13,680 --> 00:35:18,652
这个披萨片将会
引导我们的用户到


704
00:35:18,719 --> 00:35:19,720
下个画面 


705
00:35:20,220 --> 00:35:23,123
既然我们现在都已经熟悉了
从右到左 


706
00:35:23,190 --> 00:35:26,126
那么我们就直接在阿拉伯语中
运行我们的app 


707
00:35:26,760 --> 00:35:29,129
就不再向你们展示它在
英语中是什么样了 


708
00:35:29,196 --> 00:35:31,732
因为我们已经过了那个阶段 


709
00:35:34,334 --> 00:35:38,405
太好了 因为我用了自动布局
和前后限制 


710
00:35:38,472 --> 00:35:40,541
把披萨片放到了那个
图片视图 


711
00:35:40,807 --> 00:35:42,442
它的位置就是
正确的了 


712
00:35:42,509 --> 00:35:45,279
它位于单元左侧上方 
和从右到左的用户


713
00:35:45,345 --> 00:35:46,313
期待的一模一样 


714
00:35:46,647 --> 00:35:51,485
然后 很明显你可以看到 
披萨片指的方向是错误的 


715
00:35:52,085 --> 00:35:54,755
保罗之前谈到的 
正是这种


716
00:35:54,821 --> 00:35:56,323
定向
图片 


717
00:35:56,590 --> 00:35:58,592
我们就可以使用
图片翻转API


718
00:35:58.692 --> 00:36:00.127 align:middle
来进行纠正 


719
00:35:58,692 --> 00:36:00,127
来进行纠正 


720
00:36:00,861 --> 00:36:03,764
让我们回到那个图表视图
单元子类 


721
00:36:05,432 --> 00:36:07,501
这里你可以看到 
我的所有的[不知所云]方法 


722
00:36:07,568 --> 00:36:11,371
这些所有的出口 
我的所有出口都会加载


723
00:36:12,039 --> 00:36:14,341
并且准备就绪 
那么我要做的第一件事 


724
00:36:14,408 --> 00:36:17,277
给我的定制V形图案图片
获取一个基准 


725
00:36:18,345 --> 00:36:21,582
customChevronImag
eView.image 


726
00:36:21,648 --> 00:36:25,285
既然我已经有了 
我要把它放回到


727
00:36:25,352 --> 00:36:30,123
图片视图 
但是做了一个小的变更 


728
00:36:30,190 --> 00:36:32,125
我要在UI图片上 
为从右到左的布局


729
00:36:32,192 --> 00:36:33,894
方向方法
调用


730
00:36:33,961 --> 00:36:35,362
图片翻转 


731
00:36:36,396 --> 00:36:38,365
这会让你的图片在
从左到右的本地化中


732
00:36:38,432 --> 00:36:41,902
不受
影响 


733
00:36:42,269 --> 00:36:45,205
但是在从右到左的本地化中
会水平翻转 


734
00:36:45,272 --> 00:36:46,607
在这里 
重点要记住的是 


735
00:36:46,907 --> 00:36:50,744
因为这种方法已经替你
弄好了 


736
00:36:50,811 --> 00:36:53,747
你就不需要担心对它进行
集成了 它是从左到右 


737
00:36:53,814 --> 00:36:57,217
还是从右到左？
校验下 就像我之前那样 


738
00:36:57,651 --> 00:36:59,753
在任何本地化中 
你都可以信心十足地


739
00:36:59,820 --> 00:37:01,522
调用这种方法 
然后你可以确信 


740
00:37:01,588 --> 00:37:02,656
它是不会出错的 


741
00:37:03,657 --> 00:37:05,158
就这样 
需要我们做的就这些 


742
00:37:05,225 --> 00:37:07,594
做完了这个变更 
我们再来运行一次app 


743
00:37:10,831 --> 00:37:11,899
完美的比萨饼 


744
00:37:12,165 --> 00:37:14,601
我们的V形图案
翻转过来了


745
00:37:15,035 --> 00:37:15,802
谢谢 


746
00:37:18,338 --> 00:37:21,341
我们的V形图案翻转过来了 
我们的app看上去也很棒 


747
00:37:21,408 --> 00:37:24,444
我们有了翻译 
定制手势看上去也很漂亮 


748
00:37:24,511 --> 00:37:25,712
我们就准备就绪了 


749
00:37:25,779 --> 00:37:28,782
把你的app本地化为从右到左
就是这么简单 


750
00:37:29,116 --> 00:37:32,653
萨拉该你了 
给大家讲完这次会议 


751
00:37:37,691 --> 00:37:39,726
谢谢你萨拉 
演示很棒 


752
00:37:39,927 --> 00:37:42,229
我们很快会把萨拉今天给我们
做的演示


753
00:37:42,296 --> 00:37:45,265
更新到
网上 


754
00:37:45,332 --> 00:37:47,734
如果你漏掉了会议的某些内容 
你可以


755
00:37:47,801 --> 00:37:50,103
下载这个简单的代码 
然后看看它 


756
00:37:50,804 --> 00:37:56,310
会议结束之前 
我来总结一下 


757
00:37:56,376 --> 00:37:58,712
当你为从右到左的语言
设计你的app时 


758
00:37:58,779 --> 00:38:02,249
这些语言的母语用户
期待UI也是从右到左 


759
00:38:02,316 --> 00:38:04,651
有了我们添加到iOS 9上的
新原生UIKit支持 


760
00:38:04,718 --> 00:38:08,055
这就是一个
绝佳的机遇 


761
00:38:08,555 --> 00:38:11,525
对你来说 就是添加
这个本地化的好机会 


762
00:38:11,592 --> 00:38:16,163
不费吹灰之力 
我们还添加了新API 


763
00:38:16,296 --> 00:38:20,968
对于不说母语的开发者
以及说母语的开发者来说 


764
00:38:21,034 --> 00:38:22,970
都会
非常简单 


765
00:38:23,570 --> 00:38:26,340
你也可以借此接触到
数以百万计的


766
00:38:26,406 --> 00:38:27,875
新用户、新市场 


767
00:38:29,610 --> 00:38:34,081
要获取更多信息 
请访问我们的资料网站 


768
00:38:34,147 --> 00:38:37,551
网址是developer.Apple.com
 我们有国际化资料 


769
00:38:37,618 --> 00:38:39,753
还有本地化
资料 


770
00:38:40,020 --> 00:38:42,856
如果你有问题 
你可以把它们贴到开发者论坛 


771
00:38:43,790 --> 00:38:46,927
我们也建议你们参加
那些相关的会议 


772
00:38:46,994 --> 00:38:49,696
我强烈推荐明天上午9 00的
“国际化中有什么新料” 


773
00:38:49,763 --> 00:38:52,332
再次
谢谢你们 


774
00:38:52,399 --> 00:38:54,601
谢谢你们来参会 
祝你们下午过得愉快！


775
00:38:54.668 --> 00:38:56.703 align:middle
谢谢！

