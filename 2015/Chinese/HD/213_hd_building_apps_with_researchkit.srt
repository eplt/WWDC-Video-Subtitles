1
00:00:20,387 --> 00:00:23,090
构建App跟Researchkit


2
00:00:30,764 --> 00:00:31,598
大家好！


3
00:00:31,798 --> 00:00:32,766
我叫约翰·厄尔


4
00:00:32,833 --> 00:00:34,835
是ResearchKit
团队的一名工程师


5
00:00:35,269 --> 00:00:37,004
今天我要讲讲ResearchKit


6
00:00:37,337 --> 00:00:39,373
以及如何促进App研究


7
00:00:40,841 --> 00:00:42,509
今天 我的谈话内容由四个部分构成


8
00:00:43,477 --> 00:00:45,879
首先要讲讲什么是
ResearchKit


9
00:00:46,880 --> 00:00:49,283
然后再谈几个问题


10
00:00:49,516 --> 00:00:51,985
几个影响App型研究设计的相关问题


11
00:00:53,153 --> 00:00:55,522
虽然我的主旨是在阐述如何使用


12
00:00:55,822 --> 00:00:57,524
ResearchKit构建App时


13
00:00:57,591 --> 00:00:59,893
ResearchKit
在研究App的具体功能


14
00:01:01,495 --> 00:01:03,630
最后 由于它是一个开放源码项目


15
00:01:04,197 --> 00:01:06,433
我要讲讲大家该如何促成
ResearchKit


16
00:01:10,470 --> 00:01:11,305
那我们就开始吧！


17
00:01:12,439 --> 00:01:14,007
什么是ResearchKit？


18
00:01:14,441 --> 00:01:17,177
简而言之它是一个开放源码工程


19
00:01:17,311 --> 00:01:18,612
可以在GitHub上使用


20
00:01:19,546 --> 00:01:20,881
但是如果延伸一下


21
00:01:21,281 --> 00:01:22,683
我们首先需要了解一点动机


22
00:01:23,684 --> 00:01:26,486
即使您以前从未参与过医学研究工作


23
00:01:27,321 --> 00:01:28,755
但是类似工作您可能已经见过


24
00:01:29,122 --> 00:01:30,824
无论是在大学还是在医院


25
00:01:32,092 --> 00:01:33,594
如果您已经参与了一项研究工作


26
00:01:33,861 --> 00:01:36,263
您可能会打电话和调查员碰头


27
00:01:36,630 --> 00:01:38,899
别人给您解释具体工作及其风险和效益


28
00:01:39,900 --> 00:01:44,638
然后您可能要回答
问题采集样本比以往更频繁


29
00:01:45,539 --> 00:01:47,474
现在 这可是一个重量级模型


30
00:01:48,141 --> 00:01:50,410
研究人员已经告诉我们它有三个问题


31
00:01:52,913 --> 00:01:55,115
第一个问题是有限参与


32
00:01:57,885 --> 00:02:01,188
在大学校园内贴传单只是将人员参与


33
00:02:01,588 --> 00:02:03,357
局限在校园附近的居民


34
00:02:03,957 --> 00:02:07,694
进行海量研究则
需要很多研究团队开展合作


35
00:02:08,362 --> 00:02:11,231
这就意味着 如果开展研究
频率也不会太高


36
00:02:12,999 --> 00:02:16,003
第二个问题是数据较主观也不常见


37
00:02:17,004 --> 00:02:19,606
经常是通过调查每月收集一次数据


38
00:02:20,974 --> 00:02:21,975
或者周期更长


39
00:02:22,576 --> 00:02:24,545
这就影响了提出的问题


40
00:02:25,078 --> 00:02:26,079
限制了数据质量


41
00:02:28,115 --> 00:02:30,150
第三个问题是单向通信


42
00:02:30,951 --> 00:02:35,355
您曾经参与的研究工作具体结果
您可能从未听说过除非您认识调查员


43
00:02:36,790 --> 00:02:38,358
这就是我们认为App带来的好处


44
00:02:40,194 --> 00:02:42,229
App Store经销
模式辐射范围很广


45
00:02:42,496 --> 00:02:45,065
可以帮助研究人员接触更多研究对象


46
00:02:45,632 --> 00:02:48,168
因此采用ResearchKit的
前五种研究App


47
00:02:48,635 --> 00:02:52,172
注册参与者超过70,000人
在他们的研究领域中


48
00:02:52,372 --> 00:02:54,608
已经开展了很多研究项目
这也是规模最大的一个


49
00:02:56,443 --> 00:02:58,912
第二 App的数据可以持续流动


50
00:02:59,213 --> 00:03:02,115
这与主观不常见的
人工收集数据形成鲜明对比


51
00:03:03,317 --> 00:03:05,853
最后 App可以局部记录


52
00:03:05,919 --> 00:03:08,188
每个参与者的情况以便向他们反馈


53
00:03:09,356 --> 00:03:11,425
在症状管理方面的具体表现


54
00:03:12,492 --> 00:03:14,061
并有助于保持他们的参与度


55
00:03:14,261 --> 00:03:15,796
而且也不会增加调查人员的工作量


56
00:03:16,897 --> 00:03:18,932
在Apple我们以前
希望为更多研究项目


57
00:03:18,999 --> 00:03:21,735
让这一点成为现实这就是构建
ResearchKit的原因


58
00:03:22,669 --> 00:03:24,671
ResearchKit是一种
开放源码框架


59
00:03:24,738 --> 00:03:25,973
可以在GitHub上使用


60
00:03:27,107 --> 00:03:29,176
使用它 创建研究App更容易


61
00:03:29,376 --> 00:03:30,477
无论是商用App


62
00:03:30,844 --> 00:03:33,947
还是纳入学术研究


63
00:03:35,282 --> 00:03:38,018
现在iOS有了很棒的API


64
00:03:38,085 --> 00:03:39,520
可以用来收集被动数据信息


65
00:03:39,820 --> 00:03:42,022
比如HealthKit
和CoreMotion


66
00:03:43,190 --> 00:03:44,725
但是要成功开展App研究


67
00:03:44,791 --> 00:03:46,994
还有很多方面需要了解


68
00:03:48,295 --> 00:03:51,298
我们希望在这些方面，
ResearchKit对您有所帮助


69
00:03:51,765 --> 00:03:54,001
现在ResearchKit
有三个模块


70
00:03:55,302 --> 00:03:56,670
第一个模块是调查


71
00:03:57,271 --> 00:03:59,206
ResearchKit
提供标准UI模板


72
00:03:59,473 --> 00:04:02,176
可以用来调查iPhone或iPad


73
00:04:02,676 --> 00:04:05,012
我们采用了最常见的健康研究测量工具


74
00:04:05,479 --> 00:04:08,215
对它进行了测试
比如SF12或EQ5D


75
00:04:09,583 --> 00:04:11,752
第二个模块是知情同意


76
00:04:12,953 --> 00:04:15,756
在人体观察研究领域它是一项常规要求


77
00:04:16,557 --> 00:04:18,692
为了让参与者充分了解研究细节


78
00:04:18,992 --> 00:04:21,562
并在此情况下获得参与者的同意


79
00:04:22,896 --> 00:04:24,498
每项研究工作的细节都存在差异


80
00:04:24,598 --> 00:04:26,500
因此ResearchKit
会提供模板


81
00:04:26,867 --> 00:04:29,236
在App过程中可以用来展示这种差异


82
00:04:31,972 --> 00:04:34,341
ResearchKit
的第三个模块是现时任务


83
00:04:35,375 --> 00:04:37,477
现时任务是一种半控测试项目


84
00:04:37,778 --> 00:04:39,980
在此项目中参与者按步骤接受指令


85
00:04:40,180 --> 00:04:42,216
通过装置上的传感器收集数据时


86
00:04:42,683 --> 00:04:44,117
即可执行该任务


87
00:04:44,852 --> 00:04:46,687
例如在这种步态与平衡任务中


88
00:04:47,554 --> 00:04:51,158
我们在来回步行过程中将手机放入口袋


89
00:04:51,491 --> 00:04:55,596
通过加速仪和陀罗仪
可以收集步态评估数据


90
00:04:56,830 --> 00:04:59,132
因此我们了解了
ResearchKit三个方面


91
00:04:59,466 --> 00:05:03,136
调查知情同意和现时任务


92
00:05:04,438 --> 00:05:06,173
在发布ResearchKit同时


93
00:05:06,773 --> 00:05:10,244
与我们合作的调查人员向App
Store 提供了他们自己的App


94
00:05:11,245 --> 00:05:14,114
即使现在我们也在使用这些
Apps收集疾病相关数据


95
00:05:14,348 --> 00:05:17,618
非常广泛比如帕金森病、糖尿病、


96
00:05:17,885 --> 00:05:20,454
心血管疾病、哮喘和乳腺癌


97
00:05:21,622 --> 00:05:24,691
我们已与上述合作机构
共同为这些App


98
00:05:24,925 --> 00:05:26,059
以及这些机构


99
00:05:26,260 --> 00:05:28,495
共享的核心共用库开放了源代码


100
00:05:30,731 --> 00:05:33,100
因此如果需要快速启动
它就能帮助您开始App


101
00:05:33,433 --> 00:05:35,402
那么App究竟具备哪些功能呢？


102
00:05:36,904 --> 00:05:39,306
在适应阶段它们都采用了


103
00:05:39,373 --> 00:05:41,775
ResearchKit的
知情同意模块


104
00:05:42,409 --> 00:05:44,611
但是之后一旦注册参与者


105
00:05:45,579 --> 00:05:46,947
它们会以几种方式采集数据


106
00:05:48,582 --> 00:05:50,551
首先它们采用
ResearchKit的


107
00:05:51,118 --> 00:05:53,353
调查模块和现时任务模块通过排程活动


108
00:05:53,654 --> 00:05:55,088
采集更多主观测量结果


109
00:05:55,856 --> 00:05:58,492
此外它们采用HealthKit
和CoreMotion


110
00:05:58,692 --> 00:06:02,062
通过被动数据采集获得了客观度量值


111
00:06:03,931 --> 00:06:07,901
而且 通过加入一份仪表盘标签


112
00:06:08,368 --> 00:06:09,970
解决了单向通信问题


113
00:06:10,170 --> 00:06:13,807
因此参与人员可以查看和跟踪


114
00:06:14,308 --> 00:06:16,710
源自调查结果的两种主观量度值


115
00:06:16,777 --> 00:06:19,513
比如情绪以及源自
HealthKit的


116
00:06:19,847 --> 00:06:21,715
客观度量值如重量参数


117
00:06:24,384 --> 00:06:27,120
因此正是ResearchKit
和App在使用它


118
00:06:27,888 --> 00:06:29,723
但是随着
ResearchKit的开发


119
00:06:29,790 --> 00:06:31,391
我们对构建App型研究项目过程中


120
00:06:31,525 --> 00:06:34,228
涉及的其它方面有了更好的了解


121
00:06:34,494 --> 00:06:36,029
当时我们认为这些对共享至关重要


122
00:06:36,230 --> 00:06:38,732
因此在这里我愿意
和大家一起分享我的一些心得


123
00:06:40,501 --> 00:06:42,636
如果您是一名构建研究
App项目的工程师


124
00:06:43,237 --> 00:06:45,072
可能在项目团队中并不只有您一人


125
00:06:45,839 --> 00:06:48,108
还有很多事情需要其他成员去完成


126
00:06:48,609 --> 00:06:50,777
这里我可以就此作一些简单介绍


127
00:06:52,479 --> 00:06:57,417
也许最重要的就是联系
与您所在单位有关的道德委员会


128
00:06:57,618 --> 00:07:00,988
或机构评审委员会


129
00:07:01,455 --> 00:07:05,526
以便就研究方案


130
00:07:05,859 --> 00:07:06,994
通过某种形式的道德评审


131
00:07:08,595 --> 00:07:11,398
为此您需要决定向该参与者


132
00:07:11,465 --> 00:07:13,400
通报研究情况究竟会意味着什么


133
00:07:15,669 --> 00:07:17,504
您会采用这种纸质形式


134
00:07:17,804 --> 00:07:19,940
并且希望您能够对它进行压缩


135
00:07:20,274 --> 00:07:21,708
最终适合移动App需要


136
00:07:22,042 --> 00:07:24,511
在我们进入ResearchKit
知情同意模块时


137
00:07:24,578 --> 00:07:25,946
我们会详细阐述


138
00:07:27,814 --> 00:07:32,586
接下来 由于ResearchKit
不提供后台服务


139
00:07:32,886 --> 00:07:35,055
您需要计划如何保持研究数据


140
00:07:35,422 --> 00:07:37,324
因此可能需要您本人去调查


141
00:07:37,658 --> 00:07:39,526
或与第三方服务提供商签订合同


142
00:07:40,627 --> 00:07:45,332
任何一种方式您都需要为
数据安全和保密承担责任


143
00:07:47,968 --> 00:07:51,071
最后您还需要策划如何共享研究数据


144
00:07:51,405 --> 00:07:53,807
参与人员可能需要采用仪表盘标签


145
00:07:53,874 --> 00:07:57,311
或其它方式而调查人员则


146
00:07:57,711 --> 00:08:00,914
可能要求您去寻求各方知情同意


147
00:08:02,449 --> 00:08:04,184
因此如您所见实际App架构之外


148
00:08:04,251 --> 00:08:05,652
还有各种各样的问题


149
00:08:05,986 --> 00:08:07,955
它们将对研究型App设计
产生一定影响


150
00:08:08,722 --> 00:08:10,190
更多相关资源


151
00:08:10,657 --> 00:08:13,193
请登录我们的网站
ResearchKit.org


152
00:08:13,493 --> 00:08:14,328
并且还可参阅


153
00:08:14,428 --> 00:08:16,463
我们的ResearchKit
用户邮寄清单


154
00:08:16,663 --> 00:08:18,232
通过上述网站和清单


155
00:08:18,298 --> 00:08:20,100
可以接触之前也顺利
完成任务的其他研究者


156
00:08:21,668 --> 00:08:22,903
因此无需道别


157
00:08:22,970 --> 00:08:25,105
接下来让我们谈谈使用
ResearchKit构建App


158
00:08:25,172 --> 00:08:27,207
在研究过程中ResearchKit
究竟能够发挥什么作用？


159
00:08:30,177 --> 00:08:32,880
如上所述
ResearchKit有三个模块


160
00:08:33,447 --> 00:08:35,849
调查模块知情同意模块


161
00:08:36,850 --> 00:08:37,683
和现时任务模块


162
00:08:37,751 --> 00:08:39,586
ResearchKit
所有这些模块的


163
00:08:39,785 --> 00:08:40,921
运行模式大致相同


164
00:08:44,057 --> 00:08:45,926
要求用户执行的每项活动


165
00:08:46,260 --> 00:08:47,361
被确定为一项任务


166
00:08:48,061 --> 00:08:50,364
每项任务可以包含一个或几个步骤


167
00:08:52,032 --> 00:08:54,935
为了执行一项任务
您希望就此向用户展示


168
00:08:55,269 --> 00:08:57,971
为此将使用任务视图控制器


169
00:08:59,039 --> 00:09:02,309
一个任务视图控制器就是
一个容器视图控制器


170
00:09:02,376 --> 00:09:06,680
有点像导航控制器或标签条控制
器这在UI工具箱您可能比较熟悉


171
00:09:08,749 --> 00:09:12,352
在展示任务视图控制器时


172
00:09:13,086 --> 00:09:14,922
将进入该任务的第一步


173
00:09:15,422 --> 00:09:19,059
然后在任务视图控制器内显示
它是一个视图控制器


174
00:09:19,126 --> 00:09:20,394
可以显示该步骤的数据


175
00:09:21,995 --> 00:09:24,865
这一步结束时任务视图控制器将


176
00:09:24,932 --> 00:09:26,767
采集它输出的结果并对该任务所有步骤


177
00:09:26,834 --> 00:09:28,569
输出的数据进行核对


178
00:09:29,903 --> 00:09:33,874
最后当任务完成时
任务视图控制器将通知委托代表


179
00:09:34,875 --> 00:09:36,009
您也会了解任务结果


180
00:09:37,044 --> 00:09:40,614
关于已经通过的步骤
该任务结果将有一个相应步骤结果


181
00:09:40,948 --> 00:09:41,982
如果超过一个步骤


182
00:09:42,282 --> 00:09:44,117
相应会有若干步骤结果


183
00:09:45,919 --> 00:09:47,955
这就是ResearchKit
内的对象模型


184
00:09:48,222 --> 00:09:51,625
现在我们深入了解一下
其中一个核心对象


185
00:09:51,692 --> 00:09:53,460
也就是上述步骤


186
00:09:54,294 --> 00:09:55,362
下面我们看看各个步骤


187
00:10:00,334 --> 00:10:03,103
在ResearchKit内
一个步骤实际对应的


188
00:10:03,170 --> 00:10:05,939
是一项ResearchKit任务中


189
00:10:06,206 --> 00:10:07,341
用于每个页面的基本模板


190
00:10:08,242 --> 00:10:10,177
并且子类是一种步骤


191
00:10:10,310 --> 00:10:12,312
刚好是一个抽象基类
对于ResearchKit不同模块


192
00:10:12,513 --> 00:10:14,381
需要的每个不同步骤而言


193
00:10:14,448 --> 00:10:16,617
可以用于每个不同类型


194
00:10:16,683 --> 00:10:17,518
如调查


195
00:10:17,584 --> 00:10:20,254
因此您可能会收到一项指令
一个调查问题和调查问卷


196
00:10:20,621 --> 00:10:23,223
或者对于其它而言
如现时任务需要倒计时器


197
00:10:23,624 --> 00:10:27,294
对于认知型任务
可能需要玩记忆游戏


198
00:10:29,263 --> 00:10:33,534
因此一般情况下这个基本模板


199
00:10:34,535 --> 00:10:37,538
会在页面中央展示该步骤内容


200
00:10:38,172 --> 00:10:39,806
为此已有预定义要素下面我们会谈及


201
00:10:40,240 --> 00:10:43,977
此外一般还包括向前导航控制器


202
00:10:44,244 --> 00:10:46,146
在步骤视图控制器内显示


203
00:10:49,783 --> 00:10:51,685
从代码来看它的效果如何呢？


204
00:10:52,519 --> 00:10:57,124
将ORKStep作为抽象基类


205
00:10:57,191 --> 00:10:59,193
并且它是该对象内的一个子类


206
00:10:59,526 --> 00:11:02,062
因此我要说说使用
Objective-C


207
00:11:02,129 --> 00:11:04,264
撰写这个框架文件
但从Swift完全可以使用


208
00:11:04,565 --> 00:11:07,234
并且我们还在此基础上
增加了为空性和泛型


209
00:11:07,301 --> 00:11:09,469
因此它可以和Swift 2一起使用


210
00:11:10,003 --> 00:11:10,838
那么基类


211
00:11:12,439 --> 00:11:15,509
有哪些重要特征呢？


212
00:11:16,977 --> 00:11:19,213
第一项特征也是最关键特征即标识符


213
00:11:19,513 --> 00:11:21,415
这是您作为开发人员
需要提供的一串字符


214
00:11:22,049 --> 00:11:25,285
它可能是人工
可读字符串也可能是UUID


215
00:11:25,352 --> 00:11:26,854
或者与本步骤某项记录


216
00:11:26,920 --> 00:11:29,690
以及数据库中相应任务对应的标识符


217
00:11:31,992 --> 00:11:33,293
该标识符的重要性在于


218
00:11:33,360 --> 00:11:36,096
它将该步骤与相应步骤结果连在一起


219
00:11:36,296 --> 00:11:38,832
并且在您的任务语境中
必须是唯一标识符


220
00:11:40,400 --> 00:11:44,605
接下来所有步骤都有一个标题和文本


221
00:11:45,272 --> 00:11:48,275
并且一般来说它们
都适合每个步骤模板中的


222
00:11:48,342 --> 00:11:49,276
同一对应位置


223
00:11:51,011 --> 00:11:54,681
如果您正在写一个问题
例如针对调查中的一个问题步骤


224
00:11:55,148 --> 00:11:56,683
一般来说您会设置一个短标题


225
00:11:57,017 --> 00:11:59,720
并且这个实际问题本身
会对文本特征进行核实


226
00:12:02,823 --> 00:12:05,292
还有一项特征需要说明一下
那就是备选性质


227
00:12:05,659 --> 00:12:08,662
因此调查和ResearchKit
中的每个步骤


228
00:12:08,729 --> 00:12:10,430
或者很多其它步骤可能都属于备选性质


229
00:12:11,131 --> 00:12:12,466
实际上它们默认为备选性质


230
00:12:12,699 --> 00:12:15,602
如果需要关闭它
比如因为需要提供特定答案


231
00:12:15,836 --> 00:12:16,870
您就可以利用这种特征


232
00:12:18,205 --> 00:12:20,874
那就是所谓的步骤
但是为了使用一项步骤


233
00:12:20,941 --> 00:12:22,042
需要将它放入任务文本


234
00:12:23,710 --> 00:12:27,514
现在ResearchKit中的任务
还没有一种抽象基类


235
00:12:27,581 --> 00:12:28,582
相反它只是一份协议


236
00:12:29,116 --> 00:12:33,120
定义了任务视图控制器
与每项任务的互动方式


237
00:12:34,354 --> 00:12:36,723
仍然有一项关键特征即识别符


238
00:12:37,157 --> 00:12:39,193
与在本App中可能收集的
其它任务结果相比


239
00:12:39,426 --> 00:12:42,930
它是该任务结果的唯一识别方式


240
00:12:45,132 --> 00:12:47,701
接下来虽然任务视图控制器需要


241
00:12:47,768 --> 00:12:50,003
了解该任务中下一步骤的具体内容


242
00:12:50,404 --> 00:12:53,173
为此我们根据步骤协议方法
对该步骤进行了定义


243
00:12:53,407 --> 00:12:55,642
其中我们从任务
视图控制器通过了当前步骤


244
00:12:58,312 --> 00:13:00,080
通常情况下您刚好回到下一步骤


245
00:13:00,747 --> 00:13:02,549
但有时您想了解...


246
00:13:02,616 --> 00:13:05,185
您想根据现有结果
决定采用哪种测试方案...


247
00:13:05,586 --> 00:13:07,921
需要展示哪一步


248
00:13:08,055 --> 00:13:10,424
例如如果我选了A您希望进入A步


249
00:13:10,490 --> 00:13:12,526
如果我选了B您希望进入B步


250
00:13:13,694 --> 00:13:17,130
为此任务视图控制器将
通过该任务一项结果


251
00:13:17,364 --> 00:13:20,133
您可以用来做出上述
决定的现有任务结果


252
00:13:22,402 --> 00:13:24,071
在寻找该任务的第一个步骤时


253
00:13:24,338 --> 00:13:26,373
任务视图控制器将通过零作为当前步骤


254
00:13:26,940 --> 00:13:28,675
并且该任务完成时


255
00:13:29,076 --> 00:13:31,378
告知任务视图控制器没有其它后续步骤


256
00:13:31,445 --> 00:13:33,547
就此已经没有能够
让您归零的其它步骤了


257
00:13:35,883 --> 00:13:38,118
同样任务视图控制器


258
00:13:38,185 --> 00:13:40,320
可能会询问您的任务：
之前应该有哪些步骤


259
00:13:40,821 --> 00:13:43,490
因此通过方法前步骤
您可以采取一些措施


260
00:13:43,557 --> 00:13:44,892
比如防止后向导航


261
00:13:46,527 --> 00:13:48,662
因此关于任务协议


262
00:13:48,729 --> 00:13:50,831
有多种其它特征和方法


263
00:13:51,265 --> 00:13:53,734
执行一项任务可能比较复杂


264
00:13:54,134 --> 00:13:57,771
因此ResearchKit包括
ORKTask的执行


265
00:13:58,272 --> 00:14:01,208
它是单纯情况下
的ORKOrder任务


266
00:14:01,275 --> 00:14:03,377
其中您希望采用连续顺序
展示您的各种步骤


267
00:14:04,011 --> 00:14:06,747
因此在这里您通过
一个标识符和一个步骤阵列


268
00:14:07,447 --> 00:14:09,983
即可让这些步骤从只读特征返回


269
00:14:10,484 --> 00:14:12,186
但是任务视图控制器


270
00:14:12,252 --> 00:14:15,222
只是通过ORKtask协议
与它的预订任务互动


271
00:14:15,489 --> 00:14:19,059
因此您可以按步骤呼叫
而不是对该步骤特征进行评估


272
00:14:20,394 --> 00:14:22,162
现在如果您需要条件逻辑


273
00:14:22,596 --> 00:14:25,432
还有一种预订任务版本是它的一个子类


274
00:14:25,499 --> 00:14:27,267
称为ORKNavigable
预订任务


275
00:14:27,334 --> 00:14:29,236
通过它可以明确结果相关述语


276
00:14:29,303 --> 00:14:30,637
以及相应终点步骤


277
00:14:31,305 --> 00:14:34,141
这是最近通过
外部促成方在该框架基础上


278
00:14:34,541 --> 00:14:36,343
增加的内容
今天我没有时间谈论它


279
00:14:36,577 --> 00:14:38,478
但是您有机会
了解GitHub相关细节


280
00:14:39,179 --> 00:14:40,047
任务就谈到这里


281
00:14:41,415 --> 00:14:44,117
但是执行一项任务需要使用
任务视图控制器来展示这项任务


282
00:14:44,885 --> 00:14:46,453
下面让我们看一看任务视图控制器


283
00:14:47,421 --> 00:14:48,422
您将启动一项任务


284
00:14:49,089 --> 00:14:51,992
并且需要经由此项任务
创建一个任务视图控制器


285
00:14:53,126 --> 00:14:55,729
但是您会注意到第二项特征
任务运行UUID


286
00:14:56,597 --> 00:14:58,298
这就是UUID


287
00:14:58,432 --> 00:15:00,934
它是该任务此次特定
运行的唯一识别方式


288
00:15:01,502 --> 00:15:04,505
因此如果这里我们通过零


289
00:15:04,571 --> 00:15:08,208
表明这是一个新任务实例


290
00:15:08,675 --> 00:15:09,610
我们从零开始


291
00:15:10,110 --> 00:15:12,946
但是如果我保存工作成果
假设调查时间很长


292
00:15:13,113 --> 00:15:16,483
假设我希望中途暂停
那么我可能保存


293
00:15:16,683 --> 00:15:18,519
在新任务视图控制器中确定日程


294
00:15:18,585 --> 00:15:21,889
重新启动这项任务时我们一定
会希望恢复以前的工作运行UUID


295
00:15:21,955 --> 00:15:23,423
因为它与任务运行确实相同


296
00:15:25,659 --> 00:15:27,060
然后您需要设立代表


297
00:15:27,361 --> 00:15:28,829
如果希望了解何时完成任务


298
00:15:29,062 --> 00:15:30,364
可以召回代表


299
00:15:30,764 --> 00:15:32,766
但是同样也会召回代表


300
00:15:32,833 --> 00:15:33,834
这样就有机会


301
00:15:34,001 --> 00:15:35,736
对任务视图控制器行为进行定制


302
00:15:36,069 --> 00:15:38,238
例如针对特定步骤
使用新步骤视图控制器


303
00:15:38,872 --> 00:15:40,874
代替默认步骤


304
00:15:42,876 --> 00:15:45,846
此外有些任务可能会输出信息


305
00:15:46,213 --> 00:15:47,314
一种文件输出


306
00:15:47,548 --> 00:15:50,817
例如如果在执行任务时
使用麦克风收集音频数据


307
00:15:50,951 --> 00:15:52,986
那么我们会希望在执行任务过程中


308
00:15:53,053 --> 00:15:54,288
将该数据写入音频文件


309
00:15:55,656 --> 00:15:57,591
在ResearchKit中
为了给予支持


310
00:15:57,658 --> 00:15:58,959
您会给来自该任务的文件输出


311
00:15:59,026 --> 00:16:01,695
应该进入您的任务视图控制器


312
00:16:01,762 --> 00:16:02,829
指定一个输出目录


313
00:16:03,330 --> 00:16:05,766
任务完成时您需要处理这些文件


314
00:16:05,832 --> 00:16:07,334
然后负责清理


315
00:16:08,602 --> 00:16:11,471
最后通过程序展示
任务视图控制器并获得类似信息


316
00:16:12,573 --> 00:16:15,976
因此您所看到的这种任务视图控制器


317
00:16:16,577 --> 00:16:17,911
它的行为相当标准


318
00:16:18,212 --> 00:16:20,480
并且任务视图控制器本身


319
00:16:20,547 --> 00:16:21,949
只能控制数量很少的视窗不动产


320
00:16:22,516 --> 00:16:24,384
因此它控制这个导航条


321
00:16:24,685 --> 00:16:25,919
设定进度显示结果


322
00:16:25,986 --> 00:16:27,921
可能还设定一些向后导航控制机构


323
00:16:28,555 --> 00:16:30,991
此外它向步骤视图控制器提供的信息


324
00:16:31,058 --> 00:16:34,795
刚好能够正确显示向前导航控制机构


325
00:16:36,363 --> 00:16:37,631
任务视图控制器到此为止


326
00:16:38,298 --> 00:16:39,399
但是得到结果呢？


327
00:16:39,666 --> 00:16:41,301
让我们看看下面如何获得结果


328
00:16:42,870 --> 00:16:45,172
下面介绍
DidFinishWithReason


329
00:16:45,239 --> 00:16:46,106
代表召回


330
00:16:46,206 --> 00:16:49,176
任务完成时
您的代表将收到该信息


331
00:16:50,177 --> 00:16:53,380
这里您会了解到
任务视图控制器结束的原因


332
00:16:53,881 --> 00:16:57,684
可能结束的其中一项原因是
用户选择了在任务中途保存工作成果


333
00:16:58,185 --> 00:17:00,921
如果是那样您会希望提取恢复数据


334
00:17:01,255 --> 00:17:05,125
它是一种不透明
NSData性质 然后保存


335
00:17:05,692 --> 00:17:08,662
因为以后希望继续执行任务时
需要用示例说明新任务视图控制器


336
00:17:08,729 --> 00:17:11,598
并将其传输到专用
初始化程序中的恢复数据


337
00:17:13,099 --> 00:17:17,003
但是通常情况下您会顺利完成任务


338
00:17:17,304 --> 00:17:19,439
因此您希望从
任务视图控制器的结果属性


339
00:17:19,506 --> 00:17:21,541
抓取相关结果并用它解决一些问题


340
00:17:21,775 --> 00:17:23,844
如对它进行序列化发送到服务器


341
00:17:24,178 --> 00:17:28,315
或者可能需要分析以便
向用户展示其中一些信息


342
00:17:29,750 --> 00:17:31,985
最后需要解除该任务视图控制器


343
00:17:32,586 --> 00:17:34,521
因为已经展示了任务视图控制器


344
00:17:34,588 --> 00:17:35,989
还需要为解除控制器承担责任


345
00:17:38,492 --> 00:17:41,461
现在大家了解了
ResearchKit的基本概况


346
00:17:41,662 --> 00:17:43,430
以及使用任务型模式的方法


347
00:17:44,097 --> 00:17:45,766
现在让我们看看它该如何匹配


348
00:17:45,832 --> 00:17:47,868
ResearchKit第一个模块
调查模块


349
00:17:49,303 --> 00:17:51,872
因此ResearchKit中的
调查由三部分构成


350
00:17:52,105 --> 00:17:55,209
指令、调查问题和调查问卷


351
00:17:55,809 --> 00:17:57,811
反之每部分对应一个步骤


352
00:17:58,412 --> 00:17:59,646
因此我们有一个调查问题


353
00:18:00,814 --> 00:18:04,084
我们有一个指令步骤 一个问题步骤
和一个问卷步骤


354
00:18:05,085 --> 00:18:06,820
在ORKStep基类现有内容基础上


355
00:18:06,887 --> 00:18:09,289
我们再增加一些指令步骤


356
00:18:09,690 --> 00:18:11,792
但是问题步骤和
问卷步骤比它们稍微多一些


357
00:18:12,326 --> 00:18:13,227
我们要看看下个环节


358
00:18:14,761 --> 00:18:16,663
这是问题步骤和任何其它步骤一样


359
00:18:16,730 --> 00:18:19,366
它有一个识别符在任务范围内必须唯一


360
00:18:20,200 --> 00:18:22,836
问题步骤也有回答格式


361
00:18:23,704 --> 00:18:26,340
回答格式是ORKAnswer
格式的一个子类


362
00:18:26,406 --> 00:18:29,009
对应希望展示步骤的特定类型


363
00:18:29,810 --> 00:18:32,579
由于各种子类覆盖范围很广


364
00:18:32,646 --> 00:18:34,615
因此我们可能有一个
Boolean回答格式


365
00:18:34,681 --> 00:18:36,550
包括“是/否”问题
文本选择回答格式


366
00:18:36,750 --> 00:18:38,852
提供图像比例尺的图像选择回答格式


367
00:18:39,186 --> 00:18:41,588
或者日期型和时间间隔格式


368
00:18:41,855 --> 00:18:43,490
种类繁多可以在GitHub上查看


369
00:18:44,658 --> 00:18:46,426
问题步骤就谈到这里


370
00:18:46,660 --> 00:18:47,494
那么问卷步骤呢？


371
00:18:48,695 --> 00:18:52,399
这里有一个问卷步骤
并且问卷步骤有一个识别符


372
00:18:52,733 --> 00:18:54,334
而且还有一系列问卷项目


373
00:18:55,235 --> 00:18:56,370
这里是问卷项目


374
00:18:56,537 --> 00:18:58,105
每个文件项目都有一个识别符


375
00:18:58,338 --> 00:19:01,041
在问卷步骤语境内必须唯一


376
00:19:03,410 --> 00:19:06,280
和问题步骤一样问卷项目也有回答格式


377
00:19:06,713 --> 00:19:10,751
并且在受支持答卷项目中


378
00:19:10,817 --> 00:19:13,820
ResearchKit
支持相同回答格式


379
00:19:14,054 --> 00:19:16,890
例如我们可以将文本选择回答格式与


380
00:19:17,491 --> 00:19:19,760
同一表格的数字答案格式混合在一起


381
00:19:21,461 --> 00:19:26,700
这就是ResearchKit
调查模型对象的对象模型


382
00:19:27,501 --> 00:19:28,669
那么如何获得结果呢？


383
00:19:30,304 --> 00:19:33,440
这是预订任务及其识别符
和一个步骤阵列


384
00:19:34,541 --> 00:19:37,911
完成任务后就会获得任务结果


385
00:19:38,345 --> 00:19:41,615
同样有匹配识别符和一系列结果


386
00:19:43,283 --> 00:19:45,519
如果预订任务启动一个指令步骤


387
00:19:46,153 --> 00:19:47,988
那么指令步骤会有一个识别符


388
00:19:48,322 --> 00:19:51,058
一旦完成任务就会获得步骤结果


389
00:19:51,325 --> 00:19:52,459
及其相应识别符


390
00:19:53,327 --> 00:19:56,663
该步骤结果的结果属性为空


391
00:19:56,730 --> 00:19:58,832
因为在该指令步骤期间
未收集到任何数据


392
00:19:58,899 --> 00:20:00,534
我们要做的就是向它们展示该指令


393
00:20:01,969 --> 00:20:03,837
虽然这个对象没有什么有用属性


394
00:20:04,071 --> 00:20:05,272
类似开始日期和结束日期


395
00:20:05,506 --> 00:20:07,374
告诉您该指令在页面上持续的时间


396
00:20:10,110 --> 00:20:11,512
此外还可能有一个问题步骤


397
00:20:12,312 --> 00:20:15,582
这个问题步骤有一个识别符


398
00:20:15,649 --> 00:20:17,384
与相应步骤结果匹配


399
00:20:17,951 --> 00:20:22,556
不同于指令步骤结果


400
00:20:22,756 --> 00:20:24,191
实际上会有一个child结果


401
00:20:24,458 --> 00:20:27,427
承载实际答案与答案格式对应


402
00:20:29,763 --> 00:20:31,198
表格结果工作方式极为相似


403
00:20:31,598 --> 00:20:33,667
这里有一个预订任务包含唯一问卷步骤


404
00:20:34,501 --> 00:20:37,371
有两个问卷项目当然在问卷步骤内


405
00:20:37,671 --> 00:20:38,972
识别符必须唯一


406
00:20:40,474 --> 00:20:42,042
收到答案时


407
00:20:42,476 --> 00:20:44,878
会收到任务结果和匹配识别符


408
00:20:45,879 --> 00:20:49,183
还有步骤结果
以及与该问卷步骤匹配的识别符


409
00:20:50,517 --> 00:20:53,487
然后收到相应child问题结果


410
00:20:53,787 --> 00:20:56,557
这次还会收到一系列问题结果
每个问卷项目都有一个结果对应


411
00:20:56,924 --> 00:20:59,993
还有与相应文件项目匹配的识别符


412
00:21:02,896 --> 00:21:05,766
这就是ResearchKit中的
对象模型


413
00:21:05,832 --> 00:21:08,202
以及如何使用调查
并且用来展示调查项目的方法


414
00:21:09,570 --> 00:21:11,305
我要让大家看一看
Xcode简短展示


415
00:21:17,644 --> 00:21:21,748
这里有一个示例App它显示表格视图


416
00:21:21,815 --> 00:21:24,985
和一份有效任务清单
这里我要将一项调查任务


417
00:21:25,052 --> 00:21:28,388
整合在一起让大家看看
我已经提到的一些特征


418
00:21:30,991 --> 00:21:33,694
这里是表格视图控制器


419
00:21:37,631 --> 00:21:43,403
表格视图控制器有一个--
当您选择一行时


420
00:21:43,637 --> 00:21:45,506
它会举例说明任务视图控制器


421
00:21:45,839 --> 00:21:47,641
并显示该任务设定代表


422
00:21:47,708 --> 00:21:50,310
和输出目录完成任务后


423
00:21:50,911 --> 00:21:56,717
我们会在didFinish召回中
显示--我们会解除该任务视图控制器


424
00:21:58,752 --> 00:22:01,922
现在切换到任务枚举这里保留实际任务


425
00:22:02,489 --> 00:22:05,392
大家看到我定义了
各种情形包括调查情形


426
00:22:05,826 --> 00:22:08,595
并且显示的任务当前为空


427
00:22:08,662 --> 00:22:10,764
但是现在我要将它定义为调查任务


428
00:22:11,331 --> 00:22:13,133
下一步我会创建它


429
00:22:15,836 --> 00:22:20,741
为了创建调查任务我要定义计算属性


430
00:22:20,941 --> 00:22:23,810
调查任务这里我创建了一项预订任务


431
00:22:23,911 --> 00:22:26,380
以及识别符调查并附带一个步骤阵列


432
00:22:26,713 --> 00:22:27,981
现在该阵列为空


433
00:22:28,315 --> 00:22:29,416
我要添加一个指令步骤


434
00:22:30,184 --> 00:22:32,119
现在这个指令步骤有一个识别符


435
00:22:32,286 --> 00:22:33,654
这里我正在生成识别符


436
00:22:33,720 --> 00:22:36,857
因为我知道它们
在该任务内是唯一识别符


437
00:22:38,759 --> 00:22:39,960
我设置了一个标题和文本


438
00:22:40,260 --> 00:22:41,328
将在页面上显示


439
00:22:41,461 --> 00:22:43,463
您会注意到我已经将这些
标注为本地化字符串


440
00:22:43,597 --> 00:22:47,000
因为这些模型对象的内容
实际上已经本地化


441
00:22:47,067 --> 00:22:49,336
如果打算在多个场合使用App


442
00:22:49,636 --> 00:22:52,105
需要将该内容
以及App中需要本地化的


443
00:22:52,306 --> 00:22:54,141
其它项目进行本地化


444
00:22:55,576 --> 00:22:58,679
然后我会添加一个问题步骤


445
00:22:59,313 --> 00:23:01,949
这个问题步骤是一个“是/否”问题


446
00:23:02,015 --> 00:23:03,317
现在有了一个布尔回答格式


447
00:23:03,684 --> 00:23:06,687
它有一个标识符组
和一个标题问题如下：


448
00:23:06,954 --> 00:23:08,889
在一个典型日在您爬完几段楼梯后


449
00:23:08,956 --> 00:23:10,591
您的健康状态对自己是否有所影响？


450
00:23:10,991 --> 00:23:13,060
这是一个非常典型的问题


451
00:23:13,126 --> 00:23:14,461
在普通健康调查问卷中很常见


452
00:23:15,362 --> 00:23:17,764
我们已经提过问卷表格
所以我要增加一个问卷步骤


453
00:23:18,098 --> 00:23:21,435
这是一份问卷 有识别符 有标题


454
00:23:21,502 --> 00:23:24,004
还有一个常见问题：
在上两周您受到以下问题


455
00:23:24,071 --> 00:23:25,939
困扰的频率是多少？


456
00:23:26,940 --> 00:23:30,878
现在我们列出各种问题
每个问题都有一个问卷项目


457
00:23:31,578 --> 00:23:36,216
因此其中每项都是一个问题


458
00:23:36,383 --> 00:23:38,685
采用文本选择回答格式


459
00:23:38,752 --> 00:23:41,922
这是一个多项选择问题
但只能选择一个答案


460
00:23:42,556 --> 00:23:44,925
大家可以看到这里我给的答案


461
00:23:44,992 --> 00:23:47,728
根本不是几天 
超过这些天数的一半 几乎是每天


462
00:23:48,161 --> 00:23:51,798
它们也有相应数值这些值将会进行编码


463
00:23:51,865 --> 00:23:55,736
纳入结果对象因此以后可以分析结果


464
00:23:56,136 --> 00:23:58,472
这些同样可能是属性列表类值


465
00:23:58,539 --> 00:24:00,774
它可能是一个整数--宁可是一个s数


466
00:24:01,108 --> 00:24:02,442
或者可能是一个字符串像这样


467
00:24:04,411 --> 00:24:06,280
我们看到了这个兴趣项


468
00:24:06,680 --> 00:24:08,448
我的问题是做事情少有兴趣或快乐


469
00:24:08,515 --> 00:24:10,350
我们会再增加两项


470
00:24:11,218 --> 00:24:12,753
填完表格


471
00:24:16,356 --> 00:24:18,692
设置完毕后我还想做一件事情


472
00:24:18,759 --> 00:24:20,694
让您看看结果，


473
00:24:20,961 --> 00:24:23,931
为此我已为大家构架了UI
所以我们可以研究一下


474
00:24:23,997 --> 00:24:26,700
App自身中的一些结果


475
00:24:28,001 --> 00:24:30,103
这件事情实际在GitHub上的


476
00:24:30,170 --> 00:24:32,039
ORKCatalog
样本App中完成


477
00:24:32,472 --> 00:24:34,608
但是今天我还要序列化到JSON


478
00:24:34,675 --> 00:24:36,944
让大家看看JSON输出效果


479
00:24:37,611 --> 00:24:42,549
为此 我们将回到任务视图控制器委托
DidFinishWithReason


480
00:24:43,650 --> 00:24:45,719
它希望再增加一个步骤 我要把它挪开


481
00:24:47,754 --> 00:24:50,224
我要在任务上添加结论步骤
我忘了做这件事情


482
00:24:52,593 --> 00:24:53,727
所以这是我们的结论步骤


483
00:24:53,894 --> 00:24:54,828
那就回到这里吧


484
00:24:55,596 --> 00:24:56,597
我要打开reason


485
00:24:57,531 --> 00:24:59,933
如果顺利完成任务


486
00:25:00,200 --> 00:25:02,035
我会从任务视图控制器提取结果


487
00:25:02,836 --> 00:25:04,471
然后我想将它序列化到JSON


488
00:25:04,905 --> 00:25:08,675
并且ResearchKit框架本身
不包括任何JSON序列化


489
00:25:08,742 --> 00:25:12,713
我们已经将一些东西
纳入其中一个测试App


490
00:25:12,779 --> 00:25:15,182
以便证明JSON序列化
会用于一项真实App


491
00:25:15,682 --> 00:25:17,885
这里我已将其纳入
现在我可以向大家演示了


492
00:25:19,820 --> 00:25:23,290
所以我会运行它并让大家看看调查项目
在ResearchKit的情况


493
00:25:32,099 --> 00:25:33,066
开始执行任务时


494
00:25:33,700 --> 00:25:35,469
我会立即看到这个指令步骤


495
00:25:36,503 --> 00:25:37,938
还会显示进度


496
00:25:38,138 --> 00:25:39,373
我可以取消该任务


497
00:25:39,540 --> 00:25:42,843
我已经有了标题和文本
也有了导航控制机构


498
00:25:43,210 --> 00:25:45,179
大家看到它已预先生成方便开始启动


499
00:25:45,245 --> 00:25:46,780
从任务视图控制器搭建的框架开始


500
00:25:46,847 --> 00:25:47,981
实现了自动化


501
00:25:48,949 --> 00:25:50,450
我进来时看到了自己的布尔问题


502
00:25:50,651 --> 00:25:53,053
我可以选择自己的答案
如果我选择跳过这个问题


503
00:25:53,220 --> 00:25:55,622
我输入的答案会被清除
如果我返回答案已经没有了


504
00:25:56,223 --> 00:25:58,091
一旦我返回我可以回答一些不同问题


505
00:25:59,159 --> 00:26:00,861
因此我要仔细检查给出答案


506
00:26:01,295 --> 00:26:03,630
可能我并未回答全部问题但我可以继续


507
00:26:04,565 --> 00:26:05,399
最后我完成了


508
00:26:06,099 --> 00:26:07,434
我们看看结果吧！


509
00:26:10,170 --> 00:26:13,540
如前所述这里我们看到了任务结果


510
00:26:13,640 --> 00:26:16,877
还有一个起始日期和结束日期
据此可以查看该调查项目持续的时间


511
00:26:17,477 --> 00:26:19,680
我们有了输出目录
一个任务运行UUID


512
00:26:19,746 --> 00:26:21,381
从任务视图控制器开始直接通过


513
00:26:21,748 --> 00:26:23,817
我们也有了任务识别符


514
00:26:25,485 --> 00:26:27,955
child结果阵列包含
一个步骤结果阵列


515
00:26:28,088 --> 00:26:29,923
因此初始指令步骤
我们有了指令步骤结果


516
00:26:29,990 --> 00:26:32,426
初始指令步骤没有children


517
00:26:32,626 --> 00:26:35,062
因为我们未收集到用户提供的附加信息


518
00:26:36,396 --> 00:26:39,833
此外 还有问题步骤结果


519
00:26:39,900 --> 00:26:41,902
包含一个布尔问题结果


520
00:26:41,969 --> 00:26:43,604
以及为我的问题提供的实际答案


521
00:26:43,670 --> 00:26:44,805
这时我回答“是”


522
00:26:46,039 --> 00:26:50,077
然后从这里的答卷步骤
我们得到答卷步骤结果


523
00:26:50,210 --> 00:26:54,181
以及感觉形式标识符和
我输入的每个答案


524
00:26:54,248 --> 00:26:55,549
我回答了前两个问题


525
00:26:55,849 --> 00:26:59,753
我没有回答该表格中的
最后一个问卷项目


526
00:26:59,820 --> 00:27:02,122
大家可以看到这里没有实际答案属性


527
00:27:03,557 --> 00:27:06,226
并且最后对于结束指令步骤
我们还有一个步骤结果


528
00:27:07,661 --> 00:27:10,664
现在我要让大家看看
在开发App过程中


529
00:27:10,731 --> 00:27:14,334
如果需要变更调查项目
修改答案格式该有多轻松


530
00:27:16,803 --> 00:27:19,173
我希望做的一件
事情就是改变我的布尔答案格式


531
00:27:19,540 --> 00:27:21,408
或许“是”提供的信息并不充分


532
00:27:21,475 --> 00:27:23,343
或许我的健康状况受到很大影响


533
00:27:23,410 --> 00:27:24,945
或者影响不大


534
00:27:25,279 --> 00:27:27,648
为此我可以切换到文本选择回答格式


535
00:27:28,081 --> 00:27:30,117
针对允许我提供全部答案的每个选项


536
00:27:30,484 --> 00:27:34,054
我可以提供一些细节文本
这样我可以选择“是 影响很大”


537
00:27:34,121 --> 00:27:35,122
或者“是 影响不大”


538
00:27:37,057 --> 00:27:41,195
这里您还要注意一点排他性设置


539
00:27:41,528 --> 00:27:46,700
如果是多选项您可以
将一个或多个选项设为排他性选项


540
00:27:46,767 --> 00:27:49,236
如果选择了一个选项
系统会取消所以其它选项


541
00:27:50,671 --> 00:27:52,472
我也可能希望改变我的答卷步骤


542
00:27:52,539 --> 00:27:55,475
正如大家看到的那样
它是一种垂直卷动的长表格


543
00:27:55,542 --> 00:27:57,211
可能那不是我在App中期望的那样


544
00:27:57,377 --> 00:27:59,813
也许我希望有一些水平滑条


545
00:27:59,880 --> 00:28:02,382
可以用来显示大致相同的内容


546
00:28:02,816 --> 00:28:06,153
得到相同答案但是表现方式可以不同


547
00:28:06,353 --> 00:28:09,089
只需切换到ORKScale格式


548
00:28:09,156 --> 00:28:11,925
明确最大值和最小值的说明内容


549
00:28:12,226 --> 00:28:14,194
即可在ResearchKit
内轻松实现


550
00:28:15,028 --> 00:28:17,097
所以我要再次运行并让大家看看效果


551
00:28:21,502 --> 00:28:22,469
又是我们的调查项目


552
00:28:22,936 --> 00:28:23,770
非常相似


553
00:28:24,037 --> 00:28:26,139
在这个步骤我们已经有了不同选项


554
00:28:27,140 --> 00:28:31,945
以前是多选问题现在是滑条


555
00:28:32,012 --> 00:28:33,280
可以用来调整数值


556
00:28:35,849 --> 00:28:37,584
当我完成任务看到结果时


557
00:28:38,185 --> 00:28:42,356
从架构来看结果非常类似
但结果类型不同


558
00:28:42,689 --> 00:28:44,858
因为相应答案格式也不同


559
00:28:44,925 --> 00:28:46,994
所以对这些结果的解释也需要有所变化


560
00:28:48,562 --> 00:28:50,097
ResearchKit
调查就讲到这里


561
00:28:57,671 --> 00:28:59,339
第二个模块是知情同意


562
00:28:59,540 --> 00:29:02,009
ResearchKit
第二个模块是知情同意


563
00:29:03,377 --> 00:29:04,545
我们现在看一下


564
00:29:04,912 --> 00:29:05,979
什么是知情同意？


565
00:29:10,484 --> 00:29:15,522
知情同意是保证参与者
完全明白为何和如何进行调查


566
00:29:16,557 --> 00:29:17,558
调查意味着什么


567
00:29:17,791 --> 00:29:20,127
有何风险和收益的过程


568
00:29:21,261 --> 00:29:22,930
如今 调查通常针对个人


569
00:29:24,198 --> 00:29:28,635
而需要同意什么详细要求
将取决于您的调查标准


570
00:29:28,702 --> 00:29:31,371
也取决于道德审查过程


571
00:29:33,707 --> 00:29:39,847
现在 参与者和调查者
一起审查知情同意书


572
00:29:39,947 --> 00:29:41,849
从起始页到结尾签名


573
00:29:42,583 --> 00:29:45,452
也许您需要在同意过程中签名


574
00:29:47,221 --> 00:29:49,923
最终 知情同意通常是一份法律文件


575
00:29:52,860 --> 00:29:57,531
现在App Store
提交的人类研究必须包括


576
00:29:57,598 --> 00:29:59,166
道德审查的证据


577
00:29:59,800 --> 00:30:03,637
这并不完全意味着您需要
包含像我们要讨论的那个研究


578
00:30:03,704 --> 00:30:06,874
元件中的知情同意模块
那样的知情同意过程


579
00:30:07,474 --> 00:30:11,478
因为低风险研究可能是例外的


580
00:30:11,745 --> 00:30:14,615
一定的高风险研究可能需要亲自工作


581
00:30:15,983 --> 00:30:18,051
但许多案例中假设
Researchkit


582
00:30:18,118 --> 00:30:19,953
可以帮到忙那么研究元件中的知情同意


583
00:30:20,521 --> 00:30:23,457
就是合适的您可以在道德审查过程中


584
00:30:26,226 --> 00:30:27,561
自行决定


585
00:30:27,928 --> 00:30:30,097
那让我们来看看知情同意模块


586
00:30:32,366 --> 00:30:37,171
是如何工作的
Researchkit中


587
00:30:37,304 --> 00:30:39,640
有两个步骤需要
在知情同意文件中被同意


588
00:30:40,340 --> 00:30:42,876
并且这两个步骤都可以


589
00:30:42,943 --> 00:30:44,745
从ORKConsent中获取内容


590
00:30:44,811 --> 00:30:46,580
这个知情同意文件由两个序列组成


591
00:30:47,080 --> 00:30:48,582
第一个是一个部分序列


592
00:30:48,815 --> 00:30:50,651
这些部分序列可能是预定义类型


593
00:30:50,951 --> 00:30:52,719
就像数据采集、隐私、数据使用


594
00:30:52,920 --> 00:30:56,190
这些都是您希望在知情
同意文件中看到的类型


595
00:30:56,823 --> 00:30:58,425
但也有自定义部分


596
00:30:58,759 --> 00:31:02,095
因此Researchkit并不打算
提供一个完整的解决方案


597
00:31:02,262 --> 00:31:03,463
我们提供80%的解决方案


598
00:31:03,530 --> 00:31:06,600
如果您需要给您的App
附加信息您可以自行添加


599
00:31:07,835 --> 00:31:11,872
除了知情同意文件以外
还有一个签名序列


600
00:31:12,172 --> 00:31:13,740
因而我们可能有一个


601
00:31:13,807 --> 00:31:15,843
包含有预填充姓名和图像的调查签名


602
00:31:17,678 --> 00:31:23,083
以及一个我们在调查同意过程中
采集的参与者的签名和图像


603
00:31:25,185 --> 00:31:28,989
让我们看看调查元件中的这些部分


604
00:31:29,056 --> 00:31:32,860
我们有了视觉同意步骤 分享同意步骤


605
00:31:33,327 --> 00:31:36,697
以及检查同意步骤我将稍作详细解释


606
00:31:39,600 --> 00:31:43,237
视觉同意通常在文件中各部分占一屏


607
00:31:43,770 --> 00:31:46,440
有着简洁的动画过渡
稍后我将就这些预定义部分


608
00:31:46,874 --> 00:31:47,941
作个演示


609
00:31:48,141 --> 00:31:50,677
它完全可以定制因此您可以用图像替代


610
00:31:50,911 --> 00:31:52,913
您可以用动画替代


611
00:31:53,180 --> 00:31:56,283
也可以填充知情同意文件中的确切内容


612
00:31:56,950 --> 00:31:58,185
让我们看看如何编码


613
00:31:59,152 --> 00:32:01,188
您将创建一个特别种类的知情同意部分


614
00:32:01,355 --> 00:32:02,523
这种情况下采集数据


615
00:32:04,157 --> 00:32:05,926
然后设置属性


616
00:32:06,126 --> 00:32:07,628
我不用设置标题


617
00:32:07,728 --> 00:32:10,197
因为在iOS的所有语言
都已经进行过本地化


618
00:32:10,264 --> 00:32:11,732
现在我选择的是预定义部分


619
00:32:12,366 --> 00:32:15,903
但如果我不需要预定义部分
或者如果我需要指定我自己的


620
00:32:15,969 --> 00:32:17,204
我也可以这样重写


621
00:32:18,105 --> 00:32:21,041
我可以指定
在视觉同意过程中显示的概要


622
00:32:21,608 --> 00:32:23,610
当用户通过视觉同意
或在浏览整个文件时


623
00:32:23,677 --> 00:32:25,879
点击了“了解更多”的话


624
00:32:26,413 --> 00:32:30,250
我也可以指定内容


625
00:32:33,320 --> 00:32:35,055
此外您可以设置其他事项


626
00:32:35,389 --> 00:32:37,791
可以设置定制图像或者定制动画


627
00:32:37,991 --> 00:32:40,060
定制动画只是一个视频文件


628
00:32:40,127 --> 00:32:41,361
您可以包含进您的App里


629
00:32:42,296 --> 00:32:44,031
如果设置步骤类型的话不管何种错误


630
00:32:44,097 --> 00:32:46,633
您都可以覆盖掉这个定制动画
或者您也可以重新设置一个


631
00:32:48,235 --> 00:32:49,469
一旦您有了同意部分


632
00:32:49,736 --> 00:32:53,874
您就可以把您的文件附到
视觉同意步骤里


633
00:32:53,941 --> 00:32:55,475
来展示您的视觉同意序列


634
00:32:57,544 --> 00:33:01,215
知情同意模块的下一步是分享步骤


635
00:33:02,482 --> 00:33:06,987
研究数据采集艰难因此在
可行的多方研究中重复使用是有意义的


636
00:33:07,521 --> 00:33:10,390
所以获取更广泛的同意


637
00:33:10,724 --> 00:33:12,559
可以让您和其他研究者


638
00:33:13,026 --> 00:33:13,861
共享数据


639
00:33:14,995 --> 00:33:16,864
但是那对参与者会有问题


640
00:33:17,664 --> 00:33:21,068
如果数据敏感他们可能只想
协助您的研究而非别人的


641
00:33:22,369 --> 00:33:24,538
这个问题 在我们使用
Researchkit


642
00:33:24,605 --> 00:33:27,140
研发最初的App时就存在


643
00:33:27,441 --> 00:33:29,376
因此我们创建同意分享步骤


644
00:33:29,643 --> 00:33:32,246
我们已经提前
本地化了所有iOS支持的语言


645
00:33:32,646 --> 00:33:35,816
以便我们带入您的机构名称
和几个其他细节


646
00:33:36,316 --> 00:33:38,151
您就可以问参与者


647
00:33:38,552 --> 00:33:41,321
他们是否同意更广泛地分享数据


648
00:33:46,527 --> 00:33:50,664
在初期调查中
超过80%的参与者对此表示同意


649
00:33:51,365 --> 00:33:53,100
但我们仍然认为这是件重要的事项


650
00:33:53,700 --> 00:33:55,802
如果您的需求
包含这样一个广泛同意的话


651
00:33:57,171 --> 00:33:58,472
以上是同意分享步骤


652
00:33:59,072 --> 00:34:02,176
Researchkit知情同意
模块的最后一步


653
00:34:02,709 --> 00:34:06,647
是检查步骤参与者在此检查实际文件


654
00:34:07,347 --> 00:34:08,447
可能输入他们的名字


655
00:34:08,614 --> 00:34:09,983
也可能是手指签名


656
00:34:10,417 --> 00:34:12,319
我们接下来看


657
00:34:12,886 --> 00:34:13,754
这将如何编码


658
00:34:13,987 --> 00:34:15,856
现在您要开始您的同意文件


659
00:34:16,723 --> 00:34:18,592
您需要加一个


660
00:34:19,092 --> 00:34:20,393
您想采集的签名


661
00:34:20,627 --> 00:34:22,029
这是参与者签名


662
00:34:22,362 --> 00:34:25,331
您为参与者在签名线下方设置标题


663
00:34:25,399 --> 00:34:26,833
如果您想生成PDF文件的话


664
00:34:27,467 --> 00:34:29,636
我们就得到一个识别符


665
00:34:29,703 --> 00:34:32,739
如果我们想在知情同意书中


666
00:34:32,806 --> 00:34:34,842
找到一个特别的签名的话
识别符就将进行识别


667
00:34:37,476 --> 00:34:42,516
您可以关闭名字采集或者签名图像采集


668
00:34:43,382 --> 00:34:47,554
我们通过设置命令签名图像来关闭


669
00:34:50,389 --> 00:34:52,525
然后您可以在知情同意文件中添加签名


670
00:34:53,193 --> 00:34:56,196
当您指定了您想收集何种签名时


671
00:34:57,030 --> 00:34:59,633
您就可以把同意文件附到同意检查步骤


672
00:35:00,634 --> 00:35:02,669
您可以使用多个同意检查步骤


673
00:35:02,736 --> 00:35:07,341
如果您有多人在同一设备上
查看同一文件的话这是允许的


674
00:35:10,577 --> 00:35:13,614
这些就是Researchkit中
组成知情同意模块的步骤


675
00:35:13,947 --> 00:35:16,884
但要真的理解
当您运行App时看起来的样子


676
00:35:16,950 --> 00:35:18,619
接下来我将做演示


677
00:35:28,061 --> 00:35:31,899
开始编码知情同意部分


678
00:35:32,232 --> 00:35:33,901
我需要开始创建同意文件


679
00:35:34,768 --> 00:35:36,570
我先做这个 这是我的同意文件


680
00:35:37,171 --> 00:35:40,607
首先我需要在视觉同意中
来展示同意部分


681
00:35:41,642 --> 00:35:43,810
在这里我创建一个同意部分序列


682
00:35:44,077 --> 00:35:46,113
在Type 
Overview上我设置了概要


683
00:35:46,313 --> 00:35:47,314
来创建一个同意部分


684
00:35:47,848 --> 00:35:51,084
由于已经本地化过语言了
我不需要设置标题


685
00:35:55,255 --> 00:35:58,292
我来添加更多部分您可以看到这些动画


686
00:35:58,559 --> 00:36:00,160
我再来添加数据采集部分和隐私部分


687
00:36:00,360 --> 00:36:03,197
每一部分都带有
lorem ipsum文本


688
00:36:05,699 --> 00:36:10,737
此外我想展示如何给
同意文件添加实质内容


689
00:36:10,804 --> 00:36:13,874
内容将添加到同意检查文件部分


690
00:36:14,408 --> 00:36:17,377
或者添加到视觉同意部分
在点击“了解更多”时


691
00:36:17,444 --> 00:36:19,813
发现的内容中


692
00:36:20,414 --> 00:36:22,282
您可以直接指定内容属性


693
00:36:22,482 --> 00:36:25,485
它只是文本或者您可以指定HTML


694
00:36:25,719 --> 00:36:27,921
如果您想要HTML的话


695
00:36:28,989 --> 00:36:30,257
这是我的同意部分


696
00:36:31,091 --> 00:36:33,694
我需要一些同意检查步骤的签名


697
00:36:34,228 --> 00:36:35,696
我将添加参与者签名


698
00:36:36,597 --> 00:36:38,599
就像之前幻灯片里我展示的编码


699
00:36:38,932 --> 00:36:41,935
带有不同标题和不同识别


700
00:36:42,069 --> 00:36:44,238
符的带有名字和预定


701
00:36:44,571 --> 00:36:46,673
图像的调查者签名


702
00:36:47,274 --> 00:36:48,909
我将把这些添加到同意书中


703
00:36:50,711 --> 00:36:52,212
然后 我就有了同意文件


704
00:36:52,746 --> 00:36:55,883
我需要创建任务来展示我的同意过程


705
00:36:56,350 --> 00:36:58,752
这是带有识别符同意书的同意任务


706
00:36:59,152 --> 00:37:00,921
我选这个是因为它与调查不同


707
00:37:01,488 --> 00:37:03,156
它应当是我阅读


708
00:37:03,857 --> 00:37:06,226
是我能明白我有了
一个步骤序列它目前是空白的


709
00:37:06,393 --> 00:37:08,295
首先我想要一个视觉同意步骤


710
00:37:08,896 --> 00:37:11,932
我添加在这里有识别符的视觉同意书


711
00:37:11,999 --> 00:37:14,168
我从我的电脑属性中传递文件


712
00:37:15,235 --> 00:37:18,105
接下来我将展示同意分享步骤


713
00:37:19,139 --> 00:37:22,309
它仅有几个属性我需要
设定顺序来充分填充文本


714
00:37:25,979 --> 00:37:27,748
最后我需要一个同意检查步骤


715
00:37:28,148 --> 00:37:29,383
从而让参与者


716
00:37:29,449 --> 00:37:32,486
有机会输入他们的签名并检查整个文件


717
00:37:33,020 --> 00:37:35,856
这样我就从同意文件中
获得了第一个签名


718
00:37:35,923 --> 00:37:37,658
我知道是参与者签名


719
00:37:38,258 --> 00:37:41,261
同意文件本身附着
带有独特任务识别符号的


720
00:37:41,662 --> 00:37:43,830
同意检查步骤


721
00:37:44,898 --> 00:37:47,734
有几项我可以在同意检查步骤额外定制


722
00:37:48,001 --> 00:37:51,138
就像用户输入他们的名字
和在确认对话中他们同意时


723
00:37:51,205 --> 00:37:52,773
所展示的文本一样


724
00:37:53,440 --> 00:37:55,409
我已经把这些步骤添加到
我的步骤序列里了


725
00:37:56,176 --> 00:37:59,913
我只需要扩展表格视图来展示任务


726
00:38:07,421 --> 00:38:10,524
制定我想展示的实际任务


727
00:38:12,659 --> 00:38:14,962
我来演示同意部分


728
00:38:20,834 --> 00:38:22,069
我开始知情同意任务时


729
00:38:22,903 --> 00:38:25,305
直接跳到视觉同意步骤


730
00:38:25,906 --> 00:38:27,741
与一些我们看到的步骤相反


731
00:38:27,941 --> 00:38:31,411
视觉同意步骤每一部分有多个界面


732
00:38:31,712 --> 00:38:34,147
这与我的同意文件的开始部分对应


733
00:38:35,215 --> 00:38:36,216
我导航到第二步


734
00:38:36,283 --> 00:38:40,087
当我向下个界面过渡时
我们有美丽的动画


735
00:38:42,222 --> 00:38:45,025
我想说一下这是预定义好的动画


736
00:38:46,393 --> 00:38:48,996
您可以进一步定制屏幕


737
00:38:49,596 --> 00:38:50,998
例如为了使其适用您的App


738
00:38:51,331 --> 00:38:53,367
如果您用UIAppearance
设置色调


739
00:38:53,600 --> 00:38:56,403
那就会覆盖掉屏幕上方的控制按钮


740
00:38:56,603 --> 00:38:57,704
和下方这里的按钮


741
00:38:57,838 --> 00:38:59,673
并改变图像的颜色


742
00:38:59,740 --> 00:39:03,143
对应的动画可以很好地适用于
您创建的App


743
00:39:04,511 --> 00:39:05,879
当我进行下一部分


744
00:39:06,246 --> 00:39:07,648
您将看到“了解更多”按钮


745
00:39:07,981 --> 00:39:12,186
当我点击“了解更多”
我能看到特别同意文件中的实质同意


746
00:39:14,321 --> 00:39:18,258
我继续来到内容分享步骤
这只是一个问题步骤


747
00:39:18,458 --> 00:39:20,127
我问是只向您的机构


748
00:39:20,194 --> 00:39:22,529
还是向世界各地的研究者分享数据


749
00:39:22,796 --> 00:39:26,433
我想向所有您认为
合格的研究者分享数据


750
00:39:27,267 --> 00:39:31,171
那么继续我会看到
同意检查步骤它概括了


751
00:39:31,772 --> 00:39:34,274
文件每部分的标题和内容


752
00:39:34,341 --> 00:39:36,510
我只设置一部分内容


753
00:39:36,743 --> 00:39:40,113
但如果您想为您的同意
书设置特别的同意所有内容的话


754
00:39:40,380 --> 00:39:44,218
那就会是一份需要
用户同意的完整的法律文件


755
00:39:46,420 --> 00:39:48,689
现在有时您想在文件中显示的部分


756
00:39:48,755 --> 00:39:51,625
和您在视觉同意书中显示的部分不同


757
00:39:52,059 --> 00:39:53,927
您可以通过只使用文件内的部分


758
00:39:54,294 --> 00:39:56,697
在调查元件中轻易地


759
00:39:56,763 --> 00:39:58,365
让它只出现在同意检查步骤


760
00:39:58,799 --> 00:40:02,102
或者通过使用完全不同的反对代表


761
00:40:02,369 --> 00:40:03,637
或第三方选择的同意文件


762
00:40:03,971 --> 00:40:05,839
您可以设置HTML检查内容


763
00:40:06,039 --> 00:40:09,576
如果您需要完全定制
它完全支持在同意检查中


764
00:40:10,444 --> 00:40:11,879
显示您自己的HTML


765
00:40:14,348 --> 00:40:17,050
我一旦同意了您就会
看到我提供的自定义文本


766
00:40:17,684 --> 00:40:18,886
我输入我的名字


767
00:40:23,290 --> 00:40:25,893
继续我可以签字这个我做不好


768
00:40:26,560 --> 00:40:28,462
最后当我完成任务时


769
00:40:28,729 --> 00:40:30,898
您就得到了一个结果就像
在Researchkit上的


770
00:40:30,964 --> 00:40:31,798
其他任务一样


771
00:40:32,199 --> 00:40:34,201
这里有一个与视觉同意相应的步骤结果


772
00:40:34,268 --> 00:40:37,471
显示我看视觉同意用了多长时间


773
00:40:38,739 --> 00:40:41,341
因为我回答了“是”


774
00:40:42,242 --> 00:40:44,411
就分享了一个带有
答案“是”的问题步骤


775
00:40:45,145 --> 00:40:49,249
并且您会看到最终同意检查步骤的结果


776
00:40:49,550 --> 00:40:52,219
包括我输入的签名数据


777
00:40:52,286 --> 00:40:55,589
那么如果我在Swift的
实际目标中找我的名字


778
00:40:56,223 --> 00:40:59,826
我就能拉出我签名的具体的UI图像


779
00:41:01,962 --> 00:41:04,264
以上就是Researchkit中的
知情同意部分


780
00:41:05,299 --> 00:41:06,834
在结束这个不值得的


781
00:41:06,900 --> 00:41:10,671
已经学过的知情同意之前


782
00:41:10,737 --> 00:41:12,873
还有其他事项


783
00:41:12,940 --> 00:41:14,608
需要提一下


784
00:41:15,042 --> 00:41:16,443
我将它们分为两类


785
00:41:16,944 --> 00:41:18,979
第一类是知情部分


786
00:41:21,348 --> 00:41:23,317
第一部分是个形式元素


787
00:41:24,351 --> 00:41:28,689
我们已尝试把视觉同意很好地适用于


788
00:41:28,989 --> 00:41:31,625
小的iPhone
形式元素上的同意文件


789
00:41:33,427 --> 00:41:37,097
但是对于您的App您需要
添加额外的定制内容


790
00:41:37,431 --> 00:41:40,234
您需要试着让内容正好适用于那些设备


791
00:41:41,902 --> 00:41:44,905
接下来我鼓励您使用定制部分


792
00:41:45,439 --> 00:41:47,674
即我们在Researchkit的
建议风格部分


793
00:41:47,741 --> 00:41:48,942
输入的内容


794
00:41:49,376 --> 00:41:52,980
您需要表达您实际


795
00:41:53,046 --> 00:41:57,084
需要的代表您的伦理的
您的道德检查过程


796
00:41:59,186 --> 00:42:03,690
接下来您应该开始计划参与者的问题
是否放在同意过程中？


797
00:42:03,757 --> 00:42:05,392
就是说 在用户完全同意之前


798
00:42:05,792 --> 00:42:08,161
且在他们实质上加入了您的研究之后


799
00:42:08,328 --> 00:42:10,364
也许他们开始参与后会有更多问题呈现


800
00:42:11,832 --> 00:42:14,468
许多已经在使用
Researchkit中的App


801
00:42:14,635 --> 00:42:18,505
最后整合进一个理解小测验


802
00:42:19,673 --> 00:42:21,341
这可能是有点多余的工作


803
00:42:21,642 --> 00:42:23,510
但是得知参与者会真正理解


804
00:42:23,577 --> 00:42:27,548
您在视觉同意中要表达的
也会让您很放心


805
00:42:28,949 --> 00:42:31,852
为达到这个目的


806
00:42:32,553 --> 00:42:35,222
您可以使用与调查模块同样的步骤


807
00:42:35,455 --> 00:42:36,957
然后整合进同意任务即可完成


808
00:42:38,926 --> 00:42:40,794
另一方面 我们得到同意


809
00:42:41,695 --> 00:42:42,829
这里有几个点


810
00:42:43,830 --> 00:42:45,399
一个是身份验证


811
00:42:45,999 --> 00:42:50,437
Researchkit没有验证您的
参与者身份的功能


812
00:42:50,737 --> 00:42:54,408
但是使用Research Kit的
初始App可以用邮件验证


813
00:42:54,575 --> 00:42:56,543
来确保参与者是一个人


814
00:42:57,644 --> 00:43:01,014
但这个研究可能要来
自您的道德检查过程


815
00:43:01,248 --> 00:43:03,050
您也许不需要比它差太多


816
00:43:03,116 --> 00:43:04,952
比如您也许需要用第三方服务


817
00:43:05,018 --> 00:43:06,620
来更可靠地识别身份


818
00:43:07,754 --> 00:43:09,289
一旦您有了身份的概念


819
00:43:09,723 --> 00:43:12,626
您可能想要绑定身份和相关的同意记录


820
00:43:13,026 --> 00:43:15,729
这样一来使用一些加密签名就是合理的


821
00:43:17,464 --> 00:43:18,765
以上就是知情同意


822
00:43:21,401 --> 00:43:24,271
在Researchkit中的
第三个模块是主动任务


823
00:43:28,775 --> 00:43:31,245
一个主动任务是半控制的测试


824
00:43:31,979 --> 00:43:34,014
测试中会给予参与者
执行任务的逐步指示


825
00:43:34,081 --> 00:43:36,984
通过设备上传感器
在收集数据的同时执行任务


826
00:43:37,718 --> 00:43:39,286
这些任务的主要


827
00:43:39,720 --> 00:43:42,022
特性是它们是交互的且时间很短


828
00:43:42,089 --> 00:43:43,490
因此他们是分段的任务


829
00:43:44,825 --> 00:43:47,961
在一个ResearchkitApp
中目前最长的任务大约是六分钟


830
00:43:48,061 --> 00:43:50,230
大多数都只有一两分钟


831
00:43:52,933 --> 00:43:56,069
我们看一下Researchkit中
预定义好的任务


832
00:43:59,006 --> 00:44:02,075
这些任务一般有一些指示步骤


833
00:44:02,142 --> 00:44:04,811
用于给您介绍任务基本上就是告诉您


834
00:44:05,445 --> 00:44:07,147
它是什么还有您需要做什么


835
00:44:07,948 --> 00:44:10,250
然后给您某些类别的指示
让您准备去执行


836
00:44:10,317 --> 00:44:14,488
接着是一个主动的步骤
数据在此时被收集


837
00:44:15,088 --> 00:44:18,258
最后当任务完成时我们感谢您的参与


838
00:44:20,627 --> 00:44:23,363
激活步骤是其成为主动任务的原因


839
00:44:24,064 --> 00:44:29,303
在此激活步骤是一个在我们预定义好的
单独主动任务中的基本类别


840
00:44:29,570 --> 00:44:33,807
或是生成我们需要的
每个任务中特殊行为的子类


841
00:44:34,575 --> 00:44:36,810
现在当我们释放
Researchkit时


842
00:44:37,277 --> 00:44:38,445
有五个主动任务


843
00:44:39,546 --> 00:44:42,182
前三个是用传感器收集的数据打开设备


844
00:44:42,816 --> 00:44:44,585
您被要求来回走因此我们就会有


845
00:44:44,918 --> 00:44:46,553
加速计和陀螺仪收集的我们的步态


846
00:44:46,620 --> 00:44:48,422
和平衡任务的数据


847
00:44:49,089 --> 00:44:51,892
我们来设定健康任务
当我们收集心率数据时


848
00:44:52,059 --> 00:44:54,127
被要求走六分钟


849
00:44:54,995 --> 00:44:56,964
然后设定声音任务当我们使用麦克风时


850
00:44:57,264 --> 00:44:58,732
来收集您的声音信息


851
00:45:00,601 --> 00:45:04,805
此外还有两个任务更多认知测量任务


852
00:45:05,272 --> 00:45:09,009
使用更多交互触摸行为


853
00:45:09,343 --> 00:45:11,778
我们有空间记忆任务其中有序列


854
00:45:11,845 --> 00:45:14,281
被要求重复还有点击速度任务


855
00:45:14,348 --> 00:45:17,251
其中您被要求在两个
按钮间快速转换点击


856
00:45:19,286 --> 00:45:21,321
此外在我们释放
Researchkit以后


857
00:45:21,388 --> 00:45:23,156
还增加了两个主动测试


858
00:45:23,524 --> 00:45:26,126
我们有一个听力测试
还有一个反应时间测试


859
00:45:26,193 --> 00:45:27,194
您将收到一个刺激


860
00:45:27,327 --> 00:45:29,096
您必须摇晃设备做出反应


861
00:45:30,998 --> 00:45:33,567
为了帮您树立一个
有关主动任务如何工作的印象


862
00:45:34,134 --> 00:45:35,702
我将给您做一次演示来作为实践


863
00:45:36,136 --> 00:45:36,970
接下来


864
00:45:48,882 --> 00:45:50,584
这是一个很短的演示


865
00:45:50,651 --> 00:45:54,721
因为我只需要给这些
简单的预定义任务一个示例


866
00:45:55,689 --> 00:45:58,458
我将创建这个主动任务计算特性


867
00:45:59,059 --> 00:46:01,628
该任务是两个指头敲击间隔


868
00:46:01,929 --> 00:46:03,597
我只需要设定几个参数


869
00:46:03,697 --> 00:46:06,600
对每个我们提供的不同的
主动任务来说这几个步骤基本相同


870
00:46:07,835 --> 00:46:09,269
您指定一个识别符


871
00:46:09,403 --> 00:46:10,804
在您的研究中它必须是唯一的


872
00:46:11,705 --> 00:46:13,307
您指定一个拟使用说明


873
00:46:13,407 --> 00:46:16,710
作为一个本地化的字符串


874
00:46:17,244 --> 00:46:19,813
它将被代入我们提供
给每个任务的事先预定的内容中


875
00:46:20,314 --> 00:46:23,016
您指定一个时间段
及您需要用户敲击多长时间


876
00:46:23,750 --> 00:46:25,419
还可以定义一些其他的选项


877
00:46:25,485 --> 00:46:28,522
来控制我们是否在
任务开始和结束时包含实际指示步骤


878
00:46:29,289 --> 00:46:30,991
如果我们提供的对您不合适的话


879
00:46:31,191 --> 00:46:34,528
您也许会想提供您自己的指令


880
00:46:37,097 --> 00:46:39,733
现在我们有了主动任务


881
00:46:39,933 --> 00:46:41,735
并且想要把它增加到桌面视图上


882
00:46:41,935 --> 00:46:43,704
我只需要做几个改动来支持它


883
00:46:44,705 --> 00:46:46,773
我把它添加到我的任务列表


884
00:46:48,909 --> 00:46:51,512
作为一个代表任务
提及我的计算属性


885
00:46:52,045 --> 00:46:54,848
当我运行它时我应该有第三个任务


886
00:46:55,148 --> 00:46:56,750
就是两个指头敲击任务


887
00:46:59,520 --> 00:47:02,256
拟使用说明填充在这里


888
00:47:02,589 --> 00:47:05,726
其余内容本地化到
所有iOS支持的语言


889
00:47:05,792 --> 00:47:09,530
我们保持这个到所有
我们添加的主动任务


890
00:47:11,164 --> 00:47:13,700
这里是我们的下一步指示


891
00:47:13,767 --> 00:47:14,968
告诉我们该做什么


892
00:47:15,035 --> 00:47:16,737
我选择按钮来点击


893
00:47:17,271 --> 00:47:20,407
当我进入任务并开始点击前并不计时


894
00:47:20,474 --> 00:47:21,542
我现在开始点击


895
00:47:22,576 --> 00:47:26,513
现在我们看到计时器走得越来越快


896
00:47:27,114 --> 00:47:28,682
任务结束了


897
00:47:29,449 --> 00:47:31,485
当任务结束时我得到一些结果


898
00:47:31,718 --> 00:47:32,986
我们看一下它是如何运作的


899
00:47:33,854 --> 00:47:39,059
因为这是其中一个
认知任务数据没有被写到文件中


900
00:47:39,493 --> 00:47:41,762
数据被存放在内存里


901
00:47:42,462 --> 00:47:44,431
我已经在JSON连载我们看一下


902
00:47:44,898 --> 00:47:46,567
这里有了我们的任务


903
00:47:46,633 --> 00:47:48,569
同样我们有开始和结束日期
和其他各种属性


904
00:47:49,369 --> 00:47:52,272
我们有与介绍指示相对应的步骤结果


905
00:47:52,706 --> 00:47:55,542
我们有与激活步骤相对应的步骤结果


906
00:47:56,276 --> 00:47:57,744
它包含一个子结果


907
00:47:57,911 --> 00:48:00,981
就是两指敲击间隔任务的敲击间隔结果


908
00:48:02,249 --> 00:48:05,085
反过来它包含着一列样本


909
00:48:05,319 --> 00:48:07,788
样本包含着每次敲击的时间


910
00:48:08,288 --> 00:48:13,760
和屏幕上的坐标位置及识别符
显示我敲击的那个按钮


911
00:48:14,394 --> 00:48:16,663
敲击到按钮外的也记录在此


912
00:48:17,464 --> 00:48:22,402
此外这个结果也有
一些其它属性细节见屏幕


913
00:48:22,469 --> 00:48:25,539
我想讲的是这些位置
对于其它种类的主动任务


914
00:48:27,007 --> 00:48:28,242
对应着什么


915
00:48:28,575 --> 00:48:31,445
您将看到基于文件的结果
那些是带着指向磁盘特定位置的


916
00:48:31,745 --> 00:48:34,915
文件URL的ORKFile结果


917
00:48:35,449 --> 00:48:38,819
它们会出现在您设定
任务控制器时指定的输出目录中


918
00:48:41,321 --> 00:48:44,124
以上就是我的
Researchkit主动任务演示


919
00:48:51,632 --> 00:48:54,101
今天我们讲了
Researchkit的三个模块


920
00:48:54,168 --> 00:48:57,104
调查、知情同意、主动任务


921
00:48:57,871 --> 00:48:59,840
但我想还不能结束


922
00:49:00,541 --> 00:49:03,443
我想Researchkit
随着第三方


923
00:49:03,677 --> 00:49:06,480
就是你们的贡献将会持续扩充


924
00:49:07,147 --> 00:49:09,550
我们持续增加附加功能


925
00:49:09,816 --> 00:49:12,619
使它与我们最新版本的软件同步


926
00:49:14,188 --> 00:49:16,757
因此有你们的贡献它将变得更好


927
00:49:17,090 --> 00:49:18,325
让我们谈谈您可以如何贡献


928
00:49:25,199 --> 00:49:28,302
Researchkit只是
GitHub上的一个开放源码项目


929
00:49:28,836 --> 00:49:31,104
那意味着您可以像
和其他开放源码项目一样


930
00:49:31,238 --> 00:49:33,106
和它进行交互


931
00:49:34,408 --> 00:49:37,144
首先您需要选一个现有议题
或者开始一个新的并且评论它


932
00:49:37,444 --> 00:49:39,513
从中我们得知您正在继续工作


933
00:49:40,981 --> 00:49:43,183
然后您想和我们分享什么事项时


934
00:49:43,550 --> 00:49:44,785
您要交一个pull请求


935
00:49:44,852 --> 00:49:46,753
此时Apple的评审


936
00:49:47,221 --> 00:49:50,490
和我们外部活跃的贡献者将评审


937
00:49:51,024 --> 00:49:53,927
您贡献的质量


938
00:49:53,994 --> 00:49:56,129
它将如何与
Researchkit匹配


939
00:49:56,263 --> 00:49:57,397
及如何融入该项目


940
00:49:59,499 --> 00:50:02,469
迄今为止我们收到的修改中


941
00:50:02,903 --> 00:50:05,472
90%已经整合进代码库


942
00:50:05,939 --> 00:50:07,341
我认为这是个良好的起点


943
00:50:08,108 --> 00:50:10,143
让我们的项目可以向前发展


944
00:50:11,912 --> 00:50:13,680
一旦您的修改被整合


945
00:50:13,747 --> 00:50:15,082
尽管这不是结束


946
00:50:15,782 --> 00:50:16,850
此后某个时刻


947
00:50:18,318 --> 00:50:20,220
我们将启动整合过程


948
00:50:20,287 --> 00:50:22,289
从而把Researchkit
带向一个更高版本


949
00:50:22,356 --> 00:50:25,359
事实上我们昨天已经结束了第一个版本


950
00:50:25,626 --> 00:50:28,061
用Researchkit 1


951
00:50:29,997 --> 00:50:31,999
在这个过程中我们会再次


952
00:50:32,232 --> 00:50:34,134
审核您的修改比如可访问性


953
00:50:34,201 --> 00:50:36,637
也会本地化到iOS支持的所有语言


954
00:50:37,237 --> 00:50:39,473
在此请您帮忙


955
00:50:40,307 --> 00:50:44,111
希望工作听起来不算多


956
00:50:44,278 --> 00:50:45,379
您愿意帮忙


957
00:50:45,646 --> 00:50:48,682
让我们再来看看您能贡献的其它领域


958
00:50:51,852 --> 00:50:54,154
我们之前提到其中一个领域


959
00:50:54,221 --> 00:51:00,194
是主动任务我们已经有两个新的
上半月公众贡献的主动任务


960
00:51:02,262 --> 00:51:04,298
我们看到还有人贡献了答案格式


961
00:51:04,364 --> 00:51:08,068
有人添加了一个垂直滑块答案表格


962
00:51:09,002 --> 00:51:13,340
有人添加了新的图像捕捉步骤


963
00:51:16,076 --> 00:51:18,946
除此以外我们期望看到更多领域


964
00:51:19,012 --> 00:51:20,380
比如设备支持领域的贡献


965
00:51:21,048 --> 00:51:26,486
所以如果您有硬件设备
您认为可以用于医疗调查研究


966
00:51:26,720 --> 00:51:28,889
您可以为
Researchkit添加支持


967
00:51:29,323 --> 00:51:31,124
来帮助更多研究者在App中使用它


968
00:51:32,292 --> 00:51:34,928
我们也希望添加一些后台集成


969
00:51:35,229 --> 00:51:36,864
因此如果您有后台服务


970
00:51:36,930 --> 00:51:38,932
您认为可以很好地整合进
Researchkit


971
00:51:38,999 --> 00:51:40,934
并且它可以为研究者提供数据存储方案


972
00:51:41,335 --> 00:51:44,771
那么您给Researchkit添加
代码来支持您的后台将是很有意义的


973
00:51:45,372 --> 00:51:46,874
我们知道有一些贡献者


974
00:51:46,940 --> 00:51:48,242
他们已经在做了


975
00:51:50,711 --> 00:51:53,780
现在我们不谈细节 我想多谈一点


976
00:51:53,847 --> 00:51:58,485
主动任务您已看到主动任务的结构


977
00:52:01,822 --> 00:52:06,760
它有指示步骤 倒计时步骤


978
00:52:07,628 --> 00:52:09,296
激活步骤和完成步骤


979
00:52:10,531 --> 00:52:15,869
激活步骤当您实施您的
激活步骤时基础分类中


980
00:52:16,303 --> 00:52:18,338
已经有一些有用的行为


981
00:52:19,840 --> 00:52:22,976
因而激活步骤支持记录配置


982
00:52:23,277 --> 00:52:24,811
当您为了从不同设备的传感器中


983
00:52:25,045 --> 00:52:26,680
自动采集数据


984
00:52:27,581 --> 00:52:31,251
来配置您的激活步骤时
您不用写很多代码


985
00:52:32,019 --> 00:52:34,688
我们仔细看一下这是如何运作的


986
00:52:37,791 --> 00:52:38,992
当下我们有五个


987
00:52:39,059 --> 00:52:40,794
内置于
Researchkit的记录仪


988
00:52:40,861 --> 00:52:44,164
有加速记录 运动记录


989
00:52:44,231 --> 00:52:46,934
有从CoreMotion
采集数据的计步器


990
00:52:47,601 --> 00:52:49,303
有从HealthKid采集数据的


991
00:52:49,369 --> 00:52:50,537
健康质量记录


992
00:52:50,771 --> 00:52:52,573
例如 它可以用来采集心率


993
00:52:54,808 --> 00:52:56,143
我们也有位置记录


994
00:52:56,210 --> 00:52:58,378
我们可以在您激活步骤的过程中


995
00:52:58,679 --> 00:53:00,781
从Core Location
获得信息


996
00:53:02,850 --> 00:53:05,919
现在当您在iOS上使用这些时


997
00:53:05,986 --> 00:53:08,121
您需要取得用户的同意来进入数据


998
00:53:08,655 --> 00:53:10,724
Researchkit
不是一个系统框架


999
00:53:10,791 --> 00:53:12,092
它不允许您绕过这些控制


1000
00:53:12,492 --> 00:53:15,095
但是我们试着理顺这个过程


1001
00:53:15,162 --> 00:53:18,398
如果您使用一个或多个步骤
任务视图控制器会通知


1002
00:53:18,699 --> 00:53:24,505
并在指示之后步骤开始前询问许可


1003
00:53:27,040 --> 00:53:29,476
所以我稍微讲一下记录器是如何使用的


1004
00:53:29,743 --> 00:53:31,378
以Researchkit中这个


1005
00:53:31,545 --> 00:53:33,480
六分钟走路的健康步行为例


1006
00:53:34,515 --> 00:53:35,549
这是健康步行


1007
00:53:35,782 --> 00:53:37,584
它是
ORKActiveStep的子类


1008
00:53:38,452 --> 00:53:40,787
当您对ORKActiveStep
做子分类时


1009
00:53:40,854 --> 00:53:42,789
您也对激活步骤视图控制器做了子分类


1010
00:53:43,357 --> 00:53:44,958
您有一个激活步骤视图控制器


1011
00:53:45,292 --> 00:53:47,327
它有个返回指针


1012
00:53:49,296 --> 00:53:52,733
现在给健康步行配置了记录器配置


1013
00:53:53,166 --> 00:53:55,636
它将有一个带有特定的唯一的


1014
00:53:56,270 --> 00:53:58,205
识别符的健康质量记录器


1015
00:53:58,272 --> 00:54:01,775
它将与结果匹配您马上就能看到


1016
00:54:03,010 --> 00:54:05,479
这个记录器配置有几个参数


1017
00:54:05,812 --> 00:54:07,047
有数量种类


1018
00:54:07,281 --> 00:54:09,183
在此就是心率数量种类


1019
00:54:09,650 --> 00:54:13,954
有单位 在此就是心率监
视器上的每分钟心跳


1020
00:54:15,455 --> 00:54:17,224
您可以配置不止一个记录器


1021
00:54:17,324 --> 00:54:20,127
这个例子中就配置了计步器


1022
00:54:20,360 --> 00:54:21,728
再次，有了不同的识别符


1023
00:54:22,095 --> 00:54:24,398
当您运行健康步行时


1024
00:54:25,866 --> 00:54:27,034
您可从记录器中识别结果


1025
00:54:28,235 --> 00:54:31,605
当步行开始 您有两个记录器


1026
00:54:32,005 --> 00:54:33,307
一个是健康质量记录


1027
00:54:33,674 --> 00:54:34,675
一个是计步器


1028
00:54:35,209 --> 00:54:37,744
每一个都将用到


1029
00:54:37,911 --> 00:54:41,481
健康步行所附加的配置目标模型


1030
00:54:42,983 --> 00:54:45,485
当任务完成时您会得到步骤结果


1031
00:54:46,086 --> 00:54:47,454
作为您任务结果的一部分


1032
00:54:47,521 --> 00:54:50,457
步骤结果将包含两个子文件结果


1033
00:54:50,691 --> 00:54:56,463
每一个都是带识别符号的
与配置对应的记录


1034
00:54:56,897 --> 00:55:02,669
如前所述文件URL将指向输出
目录的文件在此数据会被记录


1035
00:55:03,637 --> 00:55:05,572
Researchkit中的
实际序列化格式


1036
00:55:05,639 --> 00:55:07,341
在这里是JSON


1037
00:55:07,407 --> 00:55:09,109
但如果您需要不同的格式


1038
00:55:09,176 --> 00:55:11,011
可以直接增加一个不同格式


1039
00:55:13,313 --> 00:55:14,248
以上是记录器


1040
00:55:15,148 --> 00:55:19,019
现在我已经提到做一个
客户激活步骤时您需要的过程


1041
00:55:19,620 --> 00:55:22,523
但我们在结束前还是描述一下


1042
00:55:23,724 --> 00:55:25,392
当您要创建您的定制激活步骤时


1043
00:55:26,193 --> 00:55:28,228
您先将
ORKActiveStep做子分类


1044
00:55:28,462 --> 00:55:30,163
并将激活步骤视图控制器做子分类


1045
00:55:30,497 --> 00:55:32,733
通常我们有配对的分类


1046
00:55:33,867 --> 00:55:35,235
然后您需要构建UI


1047
00:55:35,936 --> 00:55:37,404
如果您需要控制整个屏幕


1048
00:55:37,471 --> 00:55:39,139
那就意味着您将彻底覆盖


1049
00:55:39,206 --> 00:55:40,807
您的激活步骤视图控制器的UI


1050
00:55:41,175 --> 00:55:43,277
或者意味着您要定制视图


1051
00:55:43,510 --> 00:55:46,446
使其适合Researchkit
内置的激活步骤模板


1052
00:55:47,781 --> 00:55:52,653
如果您需要使用我们已有的
记录器来采集传感器数据


1053
00:55:53,353 --> 00:55:56,190
您就得配置一些记录器
并且添加新的结果类别


1054
00:55:56,857 --> 00:56:02,162
以认知游戏为例您看到
这里我们有了点击间隔任务


1055
00:56:03,664 --> 00:56:07,134
那是个我们特别创建的结果类别的例子


1056
00:56:07,768 --> 00:56:09,703
当您创建类似这个的激活类别时


1057
00:56:09,770 --> 00:56:12,306
您需要相应地创建您自己的类别结构


1058
00:56:12,606 --> 00:56:17,611
该类别结构必须可序列化


1059
00:56:17,678 --> 00:56:19,746
那将引出您要包括在结果中的一些限制


1060
00:56:22,983 --> 00:56:24,251
以上是结果步骤


1061
00:56:24,585 --> 00:56:25,853
我们谈到


1062
00:56:26,887 --> 00:56:29,022
三个模块和如何给
Researchkit贡献


1063
00:56:30,424 --> 00:56:31,825
我想给你们一点想法


1064
00:56:32,326 --> 00:56:36,163
首先 Researchkit
是开放源码的


1065
00:56:36,496 --> 00:56:40,400
我想让您做一件事复制这个结果


1066
00:56:40,467 --> 00:56:42,469
看它如何适用于您的App


1067
00:56:43,537 --> 00:56:45,639
因为它是开放源码的您可以做出贡献


1068
00:56:45,906 --> 00:56:47,941
可以对医疗研究的未来有所作为


1069
00:56:48,609 --> 00:56:49,710
这是真正的要点


1070
00:56:49,877 --> 00:56:52,312
这是一个开放源码项目
它会成为您让它成为的样子


1071
00:56:54,147 --> 00:56:57,117
还有几个其他领域您可以得到
Researchkit的附加信息


1072
00:56:59,052 --> 00:57:00,487
我们的主页


1073
00:57:00,921 --> 00:57:03,257
ResearchKit.org


1074
00:57:03,891 --> 00:57:05,826
我们有包含在
Researchkit中的


1075
00:57:05,893 --> 00:57:08,529
不同项目的链接既有使用
ResearchKit的App


1076
00:57:08,662 --> 00:57:10,664
也有我们再次链接的框架本身


1077
00:57:12,232 --> 00:57:15,469
举例来说如果您是主调查人员


1078
00:57:15,536 --> 00:57:19,373
您想联系到能帮助您的项目的人们


1079
00:57:19,840 --> 00:57:22,709
您可以联系我们
ResearchKit@Apple.com


1080
00:57:23,510 --> 00:57:25,712
最后关于技术支持我有两个邮箱列表


1081
00:57:25,779 --> 00:57:28,015
如果您需要联系正在使用该框架的用户


1082
00:57:28,849 --> 00:57:31,785
或者咨询如何使用可以联系
ResearchKit Users


1083
00:57:32,186 --> 00:57:35,255
如果是关于如何贡献的问题可以联系
ResearchKit Dev


1084
00:57:36,723 --> 00:57:39,693
当您尝试组建一个研究App时
这里有一些相关部分可以帮您


1085
00:57:40,127 --> 00:57:41,762
昨天HealthKit有新消息


1086
00:57:42,029 --> 00:57:45,365
我们介绍了一些新的数据种类


1087
00:57:45,432 --> 00:57:48,202
您可以在线访问


1088
00:57:48,502 --> 00:57:51,705
我们今天早上也有HealthKit
和ResearchKit研讨会


1089
00:57:51,772 --> 00:57:53,073
明天上午11:00也有


1090
00:57:53,841 --> 00:57:57,845
最后有一个健康
和健身的研讨会一共半小时


1091
00:57:57,911 --> 00:57:58,912
希望您参与


1092
00:57:59,913 --> 00:58:02,583
非常感谢 感谢聆听

